//===== rAthena Script ======================================= 
//= Mora Enchants
//===== By: ================================================== 
//= Euphy
//===== Current Version: ===================================== 
//= 1.2
//===== Compatible With: ===================================== 
//= rAthena Project
//===== Description: ========================================= 
//= [Official Conversion]
//= Adds enchantments to various items in exchange for
//= Mora coins.
//===== Additional Comments: ================================= 
//= 1.0 First Version. [Euphy]
//= 1.1 Optimized. [Euphy]
//= 1.1a Bug fixes. [Lemongrass]
//= 1.2 Bug fixes (bugreport:7930) [DeadlySilence]
//============================================================ 

// Arch Bishop Enchants :: coin_arc
//============================================================
mora,88,89,5	script	Keeper of Secrets#pa082	495,{
	if (checkweight(1201,1) == 0) {
		mes "您有太多事情可以做到這一點。扔掉其中的一些，然後重試。";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "您的體重太多了。減輕體重，然後重試。";
		close;
	}
	disable_items;
	if (countitem(6380) < 10) {
		mes "[技巧]";
		mes "大主教的文物是為了防禦和支持！";
		next;
		mes "[技巧]";
		mes "像其他監護人一樣，他們可以將硬幣換成其文物，因此請收集莫拉硬幣！";
		next;
		mes "[技巧]";
		mes "如果您收集了10個以上的硬幣，那就來找我交易！";
		close;
	}
	mes "[技巧]";
	mes "燈光！您看起來好像已經準備好訪問我們的文物了。";
	next;
	mes "[技巧]";
	mes "戒指，鞋子，披肩，長袍，盾牌或武器。";
	mes "選擇要接收的六種文物之一。";
	next;
	mes "[技巧]";
	mes "根據天氣和心情，我將隨機給您兩種設備之一。";
	next;
	mes "[技巧]";
	mes "我需要的只是您的10枚Mora硬幣，以授予您遺物！";
	next;
	switch(select("我認為我還沒有準備好。 :我準備好交換我的莫拉硬幣了。 :交換我的戒指。")) {
	case 1:
		mes "[技巧]";
		mes "下次見！";
		close;
	case 2:
		mes "[技巧]";
		// What does this even mean? (custom dialogue below)
		//mes "你影響的是你的哪一部分？";
		mes "您想要什麼樣的遺物？";
		next;
		switch(select("我還沒準備好:戒指:鞋子:披肩:長袍:盾牌:武器")) {
		case 1:
			mes "[技巧]";
			mes "帶著光。";
			close;
		case 2:
			if (countitem(2864) || countitem(2865) || countitem(2866)) {
				mes "[技巧]";
				mes "您已經擁有戒指已經允許您進入我們的文物！";
				close;
			}
			if (Class == Job_Arch_Bishop || Class == Job_Arch_Bishop_T || Class == Job_Baby_Arch_Bishop) {
				setarray .@items[0],2864,2865,2866; //Light_Of_Cure,Seal_Of_Cathedral,Ring_Of_Archbishop
				break;
			} else {
				mes "[技巧]";
				mes "我們寧願只與師父打交道。";
				close;
			}
		case 3:
			setarray .@items[0],2471,2472; //Shoes_Of_Affection,Shoes_Of_Judgement
			break;
		case 4:
			setarray .@items[0],2569,2570; //Shawl_Of_Affection,Shawl_Of_Judgement
			break;
		case 5:
			setarray .@items[0],15029,15030; //Robe_Of_Affection,Robe_Of_Judgement
			break;
		case 6:
			setarray .@items[0],2156; //Bible_Of_Promise1
			break;
		case 7:
			setarray .@items[0],1657,16013; //Wand_Of_Affection,Mace_Of_Judgement
			break;
		}
		set .@item, .@items[rand(getarraysize(.@items))];
		delitem 6380,10; //Mora_Coin
		getitem .@item,1;
		mes "[技巧]";
		mes "您已經獲得了 ^aa00aa"+getitemname(.@item)+"^000000. May the Blessing of the Light be with you.";
		close;
	case 3:
		if (Class == Job_Arch_Bishop || Class == Job_Arch_Bishop_T || Class == Job_Baby_Arch_Bishop) {
			mes "[技巧]";
			mes "我們為無法控制戒指的人將戒指交換為硬幣。";
			next;
			mes "[技巧]";
			mes "看來您有能力控制戒指，因此我無法將其兌換成硬幣。";
			close;
		}
		     if (countitem(2864)) set .@item,2864; //Light_Of_Cure
		else if (countitem(2865)) set .@item,2865; //Seal_Of_Cathedral
		else if (countitem(2866)) set .@item,2866; //Ring_Of_Archbishop
		else {
			mes "[技巧]";
			mes "你改變了什麼嗎？";
			close;
		}
		mes "[技巧]";
		mes "你有一個"+getitemname(.@item)+". Do you really want to trade it for 10 Mora Coins?";
		next;
		switch(select("我還沒準備好:交換我的"+getitemname(.@item))) {
		case 1:
			mes "[技巧]";
			mes "如果您改變主意，請再次停下來。";
			close;
		case 2:
			delitem .@item,1;
			getitem 6380,10; //Mora_Coin
			mes "[技巧]";
			mes "我認為那是一個甚至是一種交易。";
			close;
		}
	}
}

mora,96,74,5	script	Master of Relics#pa0829	495,{
	if (checkweight(1201,1) == 0) {
		mes "您有太多事情可以做到這一點。扔掉其中的一些，然後重試。";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "您的體重太多了。減輕體重，然後重試。";
		close;
	}
	disable_items;
	mes "[遺物]";
	mes "我增強了聖師使用的遺物，將需要2個莫拉硬幣和遺物，才能使我嘗試增強它。";
	next;
	switch(select("請提供更多詳細信息。 :請增強我的遺物。")) {
	case 1:
		mes "[遺物]";
		mes "讓我簡要解釋一下，對於2個Mora硬幣和遺物，我可以給您一個遺物的魔法。";
		next;
		mes "[遺物]";
		mes "即使這個遺物已經迷住了，我們也會在不檢查其狀態的情況下對其進行重新掌握。";
		next;
		mes "[遺物]";
		mes "因此，您已經迷住了遺物，請把它放在一個安全的地方然後回來。";
		next;
		mes "[遺物]";
		mes "啊，還有一件事！不過，我可能會失敗，如果發生這種情況，遺物將永遠丟失。";
		close;
	case 2:
		mes "[遺物]";
		mes "好的，如果失敗，您可以從技巧中獲得新的文物。";
		next;
		mes "[遺物]";
		mes "如果您有運氣的儀式，請立即使用！";
		next;
		set .@select, select("等一下！ :治愈之光:大教堂印記:大主教戒指:慈愛之鞋:審判之鞋:慈愛披肩:審判披肩:慈愛長袍:審判長袍:約定聖經第一卷:慈愛魔杖:審判權杖");
		switch(.@select) {
		case 1:
			mes "[遺物]";
			mes "當然。帶著光。";
			close;
		case 2:
		case 3:
		case 4:
			setarray .@items[0],2864,2865,2866; //Light_Of_Cure,Seal_Of_Cathedral,Ring_Of_Archbishop
			setarray .@special[0],4803,4804,4805; //Highness_Heal_3sec,Coluceo_Heal30,Heal_Amount2
			set .@item, .@items[.@select-2];
			set .@sp, .@special[.@select-2];
			set .@enchant_type,1;
			break;
		case 5:
		case 6:
		case 7:
		case 8:
		case 9:
		case 10:
		case 11:
			setarray .@items[0],2471,2472,2569,2570,15029,15030,2156; //Shoes_Of_Affection,Shoes_Of_Judgement,Shawl_Of_Affection,Shawl_Of_Judgement,Robe_Of_Affection,Robe_Of_Judgement,Bible_Of_Promise1
			set .@item, .@items[.@select-5];
			set .@enchant_type,2;
			break;
		case 12:
			set .@item,1657; //Wand_Of_Affection
			set .@enchant_type,3;
			break;
		case 13:
			set .@item,16013; //Mace_Of_Judgement
			set .@enchant_type,4;
			break;
		}
		if (countitem(6380) < 2 || countitem(.@item) == 0) {
			mes "[遺物]";
			mes "對於2個Mora硬幣，我可以在許多方面加強您擁有的遺物！";
			close;
		}
		specialeffect2 EF_REPAIRWEAPON;
		delitem 6380,2; //Mora_Coin
		delitem .@item,1;
		switch(.@enchant_type) {
		case 1:
			set .@i, rand(1,1487);
			if (.@i <= 1024) {
				// Basic combinations
				// (raw: .@i increments by 16, 4 repeats)
				setarray .@enchant_slot2[0],4711,4720,4721,4740; //Inteligence2,Dexterity1,Dexterity2,Vitality1
				setarray .@enchant_slot3[0],.@sp,4799,4766,4788; //[sp],HP500,Atk2,Mdef6
				setarray .@enchants[2],
					.@enchant_slot2[rand(getarraysize(.@enchant_slot2))],
					.@enchant_slot3[rand(getarraysize(.@enchant_slot3))];
			}
			else if (.@i <= 1040) setarray .@enchants[2],.@sp,.@sp; //[sp] [sp]
			else if (.@i <= 1487) {
				mes "[遺物]";
				mes "有時事情只是無法按照您想要的方式奏效。我希望下次事情會更好。在那之前，再見。";
				close;
			}
			break;
		case 2:
			set .@i, rand(1,1487);
			if (.@i <= 1024) {
				// Basic combinations
				// (raw: .@i increments by 16)
				setarray .@enchant_slot1[0],4710,4711,4720,4721; //Inteligence1,Inteligence2,Dexterity1,Dexterity2
				setarray .@enchant_slot2[0],4711,4720,4721,4740; //Inteligence2,Dexterity1,Dexterity2,Vitality1
				setarray .@enchant_slot3[0],4764,4799,4766,4788; //Critical5,HP500,Atk2,Mdef6
				setarray .@enchants[1],
					.@enchant_slot1[rand(getarraysize(.@enchant_slot1))],
					.@enchant_slot2[rand(getarraysize(.@enchant_slot2))],
					.@enchant_slot3[rand(getarraysize(.@enchant_slot3))];
			}
			else if (.@i <= 1026) setarray .@enchants[1],4761,4761,4761; //Matk2 Matk2 Matk2
			else if (.@i <= 1028) setarray .@enchants[1],4712,4713,4713; //Inteligence3 Inteligence4 Inteligence4
			else if (.@i <= 1030) setarray .@enchants[1],4712,4761,4761; //Inteligence3 Matk2 Matk2
			else if (.@i <= 1032) setarray .@enchants[1],4712,4713,4761; //Inteligence3 Inteligence4 Matk2
			else if (.@i <= 1034) setarray .@enchants[1],4722,4723,4723; //Dexterity3 Dexterity4 Dexterity4
			else if (.@i <= 1036) setarray .@enchants[1],4722,4703,4703; //Dexterity3 Strength4 Strength4
			else if (.@i <= 1038) setarray .@enchants[1],4722,4767,4767; //Dexterity3 Atk3 Atk3
			else if (.@i <= 1040) setarray .@enchants[1],4767,4767,4767; //Atk3 Atk3 Atk3
			else if (.@i <= 1487) {
				mes "[遺物]";
				mes "有時事情只是無法按照您想要的方式奏效。我希望下次事情會更好。在那之前，再見。";
				close;
			}
			break;
		case 3:
			set .@i, rand(1,2852);
			if (.@i <= 1984) {
				// Basic combinations
				// (raw: .@i increments by 31, 4 repeats)
				setarray .@enchant_slot2[0],4720,4740,4741,4801; //Dexterity1,Vitality1,Vitality2,SP100
				setarray .@enchant_slot3[0],4710,4711,4721,4760; //Inteligence1,Inteligence2,Dexterity2,Matk1
				setarray .@enchants[2],
					.@enchant_slot2[rand(getarraysize(.@enchant_slot2))],
					.@enchant_slot3[rand(getarraysize(.@enchant_slot3))];
			}
			else if (.@i <= 1986) setarray .@enchants[2],4761,4761; //Matk2 Matk2
			else if (.@i <= 1988) setarray .@enchants[2],4761,4723; //Matk2 Dexterity4
			else if (.@i <= 1990) setarray .@enchants[2],4761,4714; //Matk2 Inteligence5
			else if (.@i <= 1992) setarray .@enchants[2],4714,4714; //Inteligence5 Inteligence5
			else if (.@i <= 1994) setarray .@enchants[2],4714,4723; //Inteligence5 Dexterity4
			else if (.@i <= 1996) setarray .@enchants[2],4723,4723; //Dexterity4 Dexterity4
			else if (.@i <= 2852) {
				mes "[遺物]";
				mes "有時事情只是無法按照您想要的方式奏效。我希望下次事情會更好。在那之前，再見。";
				close;
			}
			break;
		case 4:
			set .@i, rand(1,2852);
			if (.@i <= 1984) {
				// Basic combinations
				// (raw: .@i increments by 31, 4 repeats)
				setarray .@enchant_slot2[0],4720,4740,4741,4701; //Dexterity1,Vitality1,Vitality2,Strength2
				setarray .@enchant_slot3[0],4700,4701,4721,4767; //Strength1,Strength2,Dexterity2,Atk3
				setarray .@enchants[2],
					.@enchant_slot2[rand(getarraysize(.@enchant_slot2))],
					.@enchant_slot3[rand(getarraysize(.@enchant_slot3))];
			}
			else if (.@i <= 1986) setarray .@enchants[2],4767,4767; //Atk3 Atk3
			else if (.@i <= 1988) setarray .@enchants[2],4767,4723; //Atk3 Dexterity4
			else if (.@i <= 1990) setarray .@enchants[2],4767,4704; //Atk3 Strength5
			else if (.@i <= 1992) setarray .@enchants[2],4704,4704; //Strength5 Strength5
			else if (.@i <= 1994) setarray .@enchants[2],4704,4723; //Strength5 Dexterity4
			else if (.@i <= 1996) setarray .@enchants[2],4723,4723; //Dexterity4 Dexterity4
			else if (.@i <= 2852) {
				mes "[遺物]";
				mes "有時事情只是無法按照您想要的方式奏效。我希望下次事情會更好。在那之前，再見。";
				close;
			}
			break;
		}
		getitem2 .@item,1,1,0,0,0,.@enchants[1],.@enchants[2],.@enchants[3];
		mes "[遺物]";
		mes "加強進展順利，幸運的是！";
		close;
	}
}

// Warlock Enchants :: coin_warrock
//============================================================
mora,104,76,4	script	Guardian of Artifacts#p	495,{
	if (checkweight(1201,1) == 0) {
		mes "您有太多事情可以做到這一點。扔掉其中的一些，然後重試。";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "您的體重太多了。減輕體重，然後重試。";
		close;
	}
	if (countitem(6380) < 10) {
		mes "[工件守護者]";
		mes "我的工作是保護術士的古老文物。";
		next;
		mes "[工件守護者]";
		mes "好吧，這實際上沒什麼大不了的。我向那些值得以幾枚莫拉硬幣的代價的人贈送了文物。";
		next;
		mes "[工件守護者]";
		mes "當您有10個或更多硬幣時，您可以與我交易。稍後再見。";
		close;
	}
	mes "[工件守護者]";
	mes "哇~我看到您準備好掌握術士的古老文物。";
	next;
	mes "[工件守護者]";
	mes "您可以從四種類型的項目中選擇：";
	mes "員工，球體，鞋子和長袍。";
	next;
	mes "[工件守護者]";
	mes "每種類型都有四種可用的選項，但是根據我的心情，可用的物品將日復一日。";
	next;
	mes "[工件守護者]";
	mes "您想和Mora硬幣一起購買工件嗎？";
	next;
	if(select("也許稍後...我還有事要做。 :是的，我願意。") == 1) {
		mes "[工件守護者]";
		mes "好吧，稍後再見。";
		close;
	}
	mes "[工件守護者]";
	mes "您想購買哪種類型的商品？";
	next;
	switch(select("退出:鞋子:寶珠:長袍:法杖")) {
	case 1:
		mes "[工件守護者]";
		mes "好吧，稍後再見。";
		close;
 	case 2:
		setarray .@items[0],2467,2468,2469,2470; //Golden_Rod_Shoes,Aqua_Shoes,Crimson_Shoes,Forest_Shoes
		set .@plural,1;
		break;
	case 3:
		setarray .@items[0],2859,2860,2861,2862; //Golden_Rod_Orb,Aqua_Orb,Crimson_Orb,Forest_Orb
		break;
	case 4:
		setarray .@items[0],15025,15026,15027,15028; //Golden_Rod_Robe,Aqua_Robe,Crimson_Robe,Forest_Robe
		break;
	case 5:
		setarray .@items[0],2007,2008,2009,2010; //Golden_Rod_Staff,Aqua_Staff,Crimson_Staff,Forest_Staff
		break;
	}
	if (countitem(6380) < 10) {
		mes "[工件守護者]";
		mes "當您有足夠的硬幣時，請您回來嗎？";
		close;
	}
	set .@item, .@items[rand(getarraysize(.@items))];
	delitem 6380,10; //Mora_Coin
	getitem .@item,1;
	mes "[工件守護者]";
	mes "我有 ^aa00aa"+getitemname(.@item)+"^000000 available today. I hope "+((.@plural)?"they":"it")+" will come in handy...";
	close;
}

mora,99,93,5	script	Artifact Crafter#pa0829	495,{
	if (checkweight(1201,1) == 0) {
		mes "您有太多事情可以做到這一點。扔掉其中的一些，然後重試。";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "您的體重太多了。減輕體重，然後重試。";
		close;
	}
	disable_items;
	mes "[工件手工藝品]";
	mes "我的工作是將工件賦予新的力量。如果您有足夠的硬幣，則可以加強以下物品之一。";
	next;
	if(select("告訴我更多信息:我想要加固我的物品。") == 1) {
		mes "[工件手工藝品]";
		mes "讓我解釋一下。一個加固要花費您兩個硬幣。";
		next;
		set .@info_only,1;
	}
	mes "[工件手工藝品]";
	mes "而且，無論是否已經得到加固，我都會處理該項目。";
	next;
	mes "[工件手工藝品]";
	mes "因此，如果您對自己的喜好加強了工件，請將其放在安全的地方並回來。";
	next;
	mes "[工件手工藝品]";
	mes "另一件事，如果強化失敗，則工件將被摧毀。請記住這一點。";
	if (.@info_only)
		close;
	next;
	set .@select, select("也許下次吧。 :金棒法杖:水色法杖:猩紅法杖:森林法杖:金棒鞋子:水色鞋子:猩紅鞋子:森林鞋子:金棒寶珠:水色寶珠:猩紅寶珠:森林寶珠:金杖長袍:水色長袍:猩紅長袍:森林長袍");
	switch(.@select) {
	case 1:
		mes "[工件手工藝品]";
		mes "如您所願。";
		close;
	case 2:
	case 3:
	case 4:
	case 5:
		setarray .@items[0],2007,2008,2009,2010; //Golden_Rod_Staff,Aqua_Staff,Crimson_Staff,Forest_Staff
		set .@enchant_type,1;
		break;
	case 6:
	case 7:
	case 8:
	case 9:
		setarray .@items[0],2467,2468,2469,2470; //Golden_Rod_Shoes,Aqua_Shoes,Crimson_Shoes,Forest_Shoes
		set .@enchant_type,2;
		break;
	case 10:
	case 11:
	case 12:
	case 13:
		setarray .@items[0],2859,2860,2861,2862; //Golden_Rod_Orb,Aqua_Orb,Crimson_Orb,Forest_Orb
		set .@enchant_type,2;
		break;
	case 14:
	case 15:
	case 16:
	case 17:
		setarray .@items[0],15025,15026,15027,15028; //Golden_Rod_Robe,Aqua_Robe,Crimson_Robe,Forest_Robe
		set .@enchant_type,2;
		break;
	}
	set .@item, .@items[(.@select-2)%4];
	if (countitem(6380) < 2 || countitem(.@item) == 0) {
		mes "[工件手工藝品]";
		mes "在我完成工作之前，您必須有2個Mora硬幣和一個要加固的物品。";
		close;
	}
	specialeffect2 EF_REPAIRWEAPON;
	delitem 6380,2; //Mora_Coin
	delitem .@item,1;
	switch(.@enchant_type) {
	case 1:
		set .@i, rand(1,2847);
		if (.@i <= 1984) {
			// Basic combinations
			// (raw: .@i increments by 31, 4 repeats)
			setarray .@enchant_slot2[0],4720,4796,4710,4801; //Dexterity1,HP200,Inteligence1,SP100
			setarray .@enchant_slot3[0],4786,4760,4711,4721; //Mdef2,Matk1,Inteligence2,Dexterity2
			setarray .@enchants[2],
				.@enchant_slot2[rand(getarraysize(.@enchant_slot2))],
				.@enchant_slot3[rand(getarraysize(.@enchant_slot3))];
		}
		else if (.@i <= 1986) setarray .@enchants[2],4713,4761; //Inteligence4 Matk2
		else if (.@i <= 1988) setarray .@enchants[2],4713,4713; //Inteligence4 Inteligence4
		else if (.@i <= 1990) setarray .@enchants[2],4761,4761; //Matk2 Matk2
		else if (.@i <= 1992) setarray .@enchants[2],4761,4713; //Matk2 Inteligence4
		else if (.@i <= 2847) {
			mes "[工件手工藝品]";
			mes "哦，不...它破裂了...嗯，它發生了。下次運氣更好。";
			close;
		}
		break;
	case 2:
		set .@i, rand(1,2858);
		if (.@i <= 1984) {
			// Basic combinations
			// (raw: .@i increments by 31)
			setarray .@enchant_slot1[0],4710,4711,4720,4721; //Inteligence1,Inteligence2,Dexterity1,Dexterity2
			setarray .@enchant_slot2[0],4720,4796,4710,4801; //Dexterity1,HP200,Inteligence1,SP100
			setarray .@enchant_slot3[0],4786,4760,4711,4721; //Mdef2,Matk1,Inteligence2,Dexterity2
			setarray .@enchants[1],
				.@enchant_slot1[rand(getarraysize(.@enchant_slot1))],
				.@enchant_slot2[rand(getarraysize(.@enchant_slot2))],
				.@enchant_slot3[rand(getarraysize(.@enchant_slot3))];
		}
		else if (.@i <= 1986) setarray .@enchants[1],4712,4713,4761; //Inteligence3 Inteligence4 Matk2
		else if (.@i <= 1988) setarray .@enchants[1],4712,4713,4713; //Inteligence3 Inteligence4 Inteligence4
		else if (.@i <= 1990) setarray .@enchants[1],4712,4761,4761; //Inteligence3 Matk2 Matk2
		else if (.@i <= 1992) setarray .@enchants[1],4712,4761,4713; //Inteligence3 Matk2 Inteligence4
		else if (.@i <= 1994) setarray .@enchants[1],4722,4713,4761; //Dexterity3 Inteligence4 Matk2
		else if (.@i <= 1996) setarray .@enchants[1],4722,4713,4713; //Dexterity3 Inteligence4 Inteligence4
		else if (.@i <= 1998) setarray .@enchants[1],4722,4761,4761; //Dexterity3 Matk2 Matk2
		else if (.@i <= 2000) setarray .@enchants[1],4722,4761,4713; //Dexterity3 Matk2 Inteligence4
		else if (.@i <= 2858) {
			mes "[工件手工藝品]";
			mes "哦，不...它破裂了...嗯，它發生了。下次運氣更好。";
			close;
		}
		break;
	}
	getitem2 .@item,1,1,0,0,0,.@enchants[1],.@enchants[2],.@enchants[3];
	mes "[工件手工藝品]";
	mes "看來我的努力成功了。";
	close;
}

// Rune Knight, Guillotine Cross, & Ranger Enchants :: new_artifact
//============================================================
mora,152,97,5	script	Guardian of Power#pa082	515,{
	if (checkweight(1201,1) == 0) {
		mes "在繼續之前，減少庫存中的物品量。";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "您的庫存過多。";
		close;
	}
	if (countitem(6380) < 10) {
		mes "[權力守護者]";
		mes "我給符文騎士，斷頭台十字架和遊騎兵古代文物，以幫助他們執行任務。";
		next;
		mes "[權力守護者]";
		mes "有些監護人可以給莫拉村硬幣，您可以用來換取這些文物。";
		next;
		mes "[權力守護者]";
		mes "如果您收集10個或更多的Mora硬幣，那麼我可以將它們換成工件。";
		close;
	}
	mes "[權力守護者]";
	mes "我認為您已經準備好接收古代文物了。";
	next;
	mes "[權力守護者]";
	mes "根據您指定的類別，有各種文物可用。";
	next;
	mes "[權力守護者]";
	mes "^ff0000仔細選擇，因為這些文物不容易到達000000。那麼您想要什麼課？";
	next;
	setarray .@jobs$[0],"Rune Knight","Guillotine Cross","Ranger";
	set .@job, select("取消:符文騎士:斷頭台 十字架:遊俠")-2;
	if (.@job == -1) {
		mes "[權力守護者]";
		mes "稍後再和我說話。";
		close;
	}
	mes "[權力守護者]";
	mes .@jobs$[.@job]+"？";
	mes "您想要哪個工件？";
	next;
	switch(.@job) {
	case 0: // Rune Knight
		setarray .@items[0],2475,2476,2574,2575;
		set .@i, select("取消: 烏爾的護腿 (鞋子): 普茲的護腿 (鞋子): 烏爾的斗篷 (服裝): 普茲的斗篷 (服裝)")-2;
		break;
	case 1: // Guillotine Cross
		setarray .@items[0],2477,2478,2577,2578;
		set .@i, select("取消:Sapha 鞋 (鞋):Nab 鞋 (鞋):Sapha 兜帽 (服裝):Nab 兜帽 (服裝)")-2;
		break;
	case 2: // Ranger
		setarray .@items[0],2479,2480,2580,2581;
		set .@i, select("取消:白翼靴子(鞋):黑翼靴子(鞋):白翼斗篷(服裝):黑翼斗篷(服裝)")-2;
		break;
	}
	if (.@i == -1) {
		mes "[權力守護者]";
		mes "稍後再和我說話。";
		close;
	}
	if (countitem(6380) < 10) {
		mes "[權力守護者]";
		mes "我不是告訴你帶上正確數量的莫拉硬幣嗎？";
		close;
	}
	delitem 6380,10; //Mora_Coin
	getitem .@items[.@i],1;
	mes "[權力守護者]";
	mes "謝謝您的10枚Mora硬幣。這是您的工件"+.@jobs$[.@job]+" job. Come back whenever you get more Mora Coins.";
	close;
}

mora,148,98,3	script	Artifact Researcher#new	521,{
	if (checkweight(1201,1) == 0) {
		mes "在繼續之前，減少庫存中的物品量。";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "您的庫存過多。";
		close;
	}
	disable_items;
	mes "[工件研究人員]";
	mes "很高興見到你。";
	mes "我在這裡研究古代文物和文物。冒險家的新發現使這個村莊對我來說非常令人興奮。";
	next;
	switch(select("告訴我更多...:賦予神器能力。 :重置增強能力。")) {
	case 1:
		mes "[工件研究人員]";
		mes "在莫拉村（Mora Village）發現了新的文物，您是否聽說過這個消息？";
		next;
		mes "[工件研究人員]";
		mes "如果您遇到這些文物中的任何一個，則可以從中提取一些隱藏的力量。";
		next;
		mes "[工件研究人員]";
		mes "我將繼續研究這些文物。我們的研究人員將莫拉硬幣作為我們的服務付款...";
		next;
		mes "[工件研究人員]";
		mes "我正在提供服務，以賦予100,000 Zeny和1 Mora Coin的工件能力。";
		next;
		mes "[工件研究人員]";
		mes "我服務中最好的部分是，您在這些文物中擁有的任何增強都不會受到傷害。";
		close;
	case 2:
		set @mora_enchant_select,1;
		break;
	case 3:
		set @mora_enchant_select,2;
		break;
	}
	if (Zeny < 100000 || countitem(6380) == 0) {
		mes "[工件研究人員]";
		mes "我不是為免費的PAL提供這些服務。 100,000 Zeny和1 Mora硬幣。這太多了嗎？";
		close;
	}
	mes "[工件研究人員]";
	mes "好的，你準備好了嗎？在我開始研究此事之前，您要我增強什麼樣的設備？";
	next;
	set .@i, select("我沒有佩戴裝備:1。武器:2。鞋子:3。服裝:4。護甲:5。配飾")-2;
	if (.@i == -1) {
		mes "[工件研究人員]";
		mes "確保您首先穿著設備。";
		close;
	}
	setarray .@parts[0], EQI_HAND_R, EQI_SHOES, EQI_GARMENT, EQI_ARMOR, EQI_ACC_L;
	set .@part, .@parts[.@i];
	if (!getequipisequiped(.@part)) {
		mes "[工件研究人員]";
		mes "確保您首先穿著設備。";
		close;
	}
	set .@equip_id, getequipid(.@part);
	set @mora_equip_part, .@part;

	//callsub L_Socket,<enchant type>,<bonus enchant type>,<4-x enchants possible>;
	// Enchant types:
	//   [1]ATK [2]CRIT [3]EVA [4]Healer [5]Spell 1 [6]Assist 1 [7]Assist 2 [8]STR [9]Range [10]Physical [11]Spell 2
	switch(.@part) {
	case EQI_HAND_R:
		switch(.@equip_id) {
			case 1660: callsub L_Socket,4,5,1;  //Wand_Of_Affection2
			case 2011: callsub L_Socket,5,11,1; //Golden_Rod_Staff2
			case 2012: callsub L_Socket,5,11,1; //Aqua_Staff2
			case 2013: callsub L_Socket,5,11,1; //Crimson_Staff2
			case 2014: callsub L_Socket,5,11,1; //Forest_Staff2
			case 16018: callsub L_Socket,1,5,1; //Mace_Of_Judgement2
		}
		break;
	case EQI_SHOES:
		switch(.@equip_id) {
			case 2475: callsub L_Socket,6,8,1;  //Ur_Greave
			case 2476: callsub L_Socket,6,10,1; //Peuz_Greave
			case 2477: callsub L_Socket,6,2,1;  //Sabah_Shoes
			case 2478: callsub L_Socket,6,1,1;  //Nab_Shoes
			case 2479: callsub L_Socket,6,2,1;  //White_Wing_Boots
			case 2480: callsub L_Socket,6,1,1;  //Black_Wing_Boots
		}
		break;
	case EQI_GARMENT:
		switch(.@equip_id) {
			case 2574: callsub L_Socket,3,8,1; //Ur_Manteau
			case 2575: callsub L_Socket,3,2,1; //Peuz_Manteau
			case 2577: callsub L_Socket,3,2,1; //Sabah_Hood
			case 2578: callsub L_Socket,3,2,1; //Nab_Hood
			case 2580: callsub L_Socket,3,1,1; //White_Wing_Manteau
			case 2581: callsub L_Socket,3,1,1; //Black_Wing_Manteau
		}
		break;
	case EQI_ARMOR:
		switch(.@equip_id) {
			case 15036: callsub L_Socket,8,1,1;  //Ur_Plate
			case 15037: callsub L_Socket,10,2,1; //Peuz_Plate
			case 15038: callsub L_Socket,2,10,1; //Sabah_Cloth
			case 15039: callsub L_Socket,1,2,1;  //Nab_Cloth
			case 15042: callsub L_Socket,2,9,1;  //White_Wing_Suits
			case 15043: callsub L_Socket,1,9,1;  //Black_Wing_Suits
		}
		break;
	case EQI_ACC_L:
		switch(.@equip_id) {
			case 2883: callsub L_Socket,6,0,2; //Ur_Seal
			case 2884: callsub L_Socket,6,0,2; //Peuz_Seal
			case 2886: callsub L_Socket,6,0,2; //Sabah_Ring
			case 2887: callsub L_Socket,6,0,2; //Nab_Ring
			case 2890: callsub L_Socket,6,0,2; //White_Wing_Brooch
			case 2891: callsub L_Socket,6,0,2; //Black_wing_Brooch
		}
		break;
	}
	mes "[工件研究人員]";
	mes "^990099"+getequipname(.@part)+"^000000??";
	mes "我真的很想研究這個設備...";
	set @mora_equip_part,0;
	close;

L_Socket:
	set .@select, @mora_enchant_select;
	set .@enchant_type, getarg(0);
	.@bonus_enchant = getarg(1);
	.@allowed_slot = getarg(2);
	set .@part, @mora_equip_part;
	set .@equip_id, getequipid(.@part);
	set .@equip_name$, getitemname(.@equip_id);
	set .@equip_refine, getequiprefinerycnt(.@part);
	setarray .@equip_card[0], getequipcardid(.@part,0),getequipcardid(.@part,1),getequipcardid(.@part,2),getequipcardid(.@part,3);
	set @mora_equip_part,0;
	set @mora_enchant_select,0;

	if (.@select == 1) {
		// If refine is +9 or higher, unlock bonus enchant type.
		if (.@equip_refine >= 9 && .@bonus_enchant > 0) {
			if (.@enchant_type < 1 || .@enchant_type > 11 || .@bonus_enchant > 11) {
				mes "[工件研究人員]";
				mes "嗯，有什麼問題。";
				close;
			}
			setarray .@enchant_type$[1],"ATK Type","Critical Type","Evasion Type","Healer Type","Spell Ability 1","Assist Ability 1","Assist Ability 2","Strength","Range Type","Physical Type","Spell Ability 2";
			mes "[工件研究人員]";
			mes "這是對設備的相當大加固。在這種情況下，可以批准擴展增強功能。您想增強哪個統計數據？";
			next;
			switch(select(.@enchant_type$[.@enchant_type],.@enchant_type$[.@bonus_enchant])) {
			case 1:
				break;
			case 2:
				set .@enchant_type, .@bonus_enchant;
				break;
			}
		}
		if (.@equip_card[3] == 0 && .@allowed_slot < 4) {
			set .@slot,4;
			mes "[工件研究人員]";
			mes "試圖進一步增強能力。以前的執行不會受到影響。你想繼續嗎？";
		} else if (.@equip_card[2] == 0 && .@allowed_slot < 3) {
			set .@slot,3;
			mes "[工件研究人員]";
			mes "嘗試第二次增強。以前的執行不會受到影響。";
			next;
			mes "[工件研究人員]";
			mes "我現在可能有機會失敗這項嘗試。你想繼續嗎？";
		} else if (.@equip_card[1] == 0 && .@allowed_slot < 2) {
			set .@slot,2;
			mes "[工件研究人員]";
			mes "讓我們開始第三個增強。我可以在此階段提供最佳的統計數據，但請記住， ^990000現在有機會銷毀該工件，並將刪除先前的增強功能 ^000000。繼續？";
		} else {
			mes "[工件研究人員]";
			mes "該工件已被加強到極限。在當前狀態下，進一步的增強是不可能的。";
			close;
		}
		next;
		if(select("我稍後回來:請繼續！") == 1) {
			mes "[工件研究人員]";
			mes "如果您改變主意，請回來。";
			close;
		}
		switch(.@enchant_type) {
		case 1: //Attack
			     if (.@slot == 4) set .@i, rand(1,525);
			else if (.@slot == 3) set .@i, rand(301,655);
			else if (.@slot == 2) set .@i, rand(451,750);
			else {
				mes "[工件研究人員]";
				mes "發生了未知錯誤。";
				close;
			}
			     if (.@i < 101) set .@enchant,4700; //Strength1
			else if (.@i < 201) set .@enchant,4811; //Fighting_Spirit1
			else if (.@i < 301) set .@enchant,4819; //Atk1
			else if (.@i < 351) set .@enchant,4701; //Strength2
			else if (.@i < 401) set .@enchant,4810; //Fighting_Spirit2
			else if (.@i < 451) set .@enchant,4766; //Atk2
			else if (.@i < 476) set .@enchant,4702; //Strength3
			else if (.@i < 501) set .@enchant,4809; //Fighting_Spirit3
			else if (.@i < 526) set .@enchant,4767; //Atk3
			else if (.@i < 626) set .@enchant,0;
			else if (.@i < 641) set .@enchant,4703; //Strength4
			else if (.@i < 656) set .@enchant,4808; //Fighting_Spirit4
			else if (.@i < 661) set .@enchant,4704; //Strength5
			else if (.@i < 666) set .@enchant,4820; //Fighting_Spirit5
			else if (.@i < 668) set .@enchant,4705; //Strength6
			else if (.@i < 670) set .@enchant,4821; //Fighting_Spirit6
			else set .@enchant,9;
			break;
		case 2: //Critical
			     if (.@slot == 4) set .@i, rand(1,470);
			else if (.@slot == 3) set .@i, rand(201,610);
			else if (.@slot == 2) set .@i, rand(381,750);
			else {
				mes "[工件研究人員]";
				mes "發生了未知錯誤。";
				close;
			}
			     if (.@i < 101) set .@enchant,4750; //Luck1
			else if (.@i < 201) set .@enchant,4700; //Strength1
			else if (.@i < 261) set .@enchant,4751; //Luck2
			else if (.@i < 321) set .@enchant,4701; //Strength2
			else if (.@i < 351) set .@enchant,4752; //Luck3
			else if (.@i < 381) set .@enchant,4702; //Strength3
			else if (.@i < 411) set .@enchant,4764; //Critical5
			else if (.@i < 441) set .@enchant,4818; //Sharp1
			else if (.@i < 471) set .@enchant,4752; //Luck3
			else if (.@i < 571) set .@enchant,0;
			else if (.@i < 586) set .@enchant,4753; //Luck4
			else if (.@i < 601) set .@enchant,4754; //Luck5
			else if (.@i < 606) set .@enchant,4765; //Critical7
			else if (.@i < 611) set .@enchant,4817; //Sharp2
			else if (.@i < 616) set .@enchant,4703; //Strength4
			else if (.@i < 618) set .@enchant,4816; //Sharp3
			else set .@enchant,9;
			break;
		case 3: //Evasion
			     if (.@slot == 4) set .@i, rand(1,525);
			else if (.@slot == 3) set .@i, rand(301,670);
			else if (.@slot == 2) set .@i, rand(451,800);
			else {
				mes "[工件研究人員]";
				mes "發生了未知錯誤。";
				close;
			}
			     if (.@i < 101) set .@enchant,4859; //Evasion1
			else if (.@i < 201) set .@enchant,4750; //Luck1
			else if (.@i < 301) set .@enchant,4730; //Agility1
			else if (.@i < 351) set .@enchant,4860; //Evasion3
			else if (.@i < 401) set .@enchant,4751; //Luck2
			else if (.@i < 451) set .@enchant,4731; //Agility2
			else if (.@i < 476) set .@enchant,4731; //Agility2
			else if (.@i < 501) set .@enchant,4752; //Luck3
			else if (.@i < 526) set .@enchant,4732; //Agility3
			else if (.@i < 626) set .@enchant,0;
			else if (.@i < 641) set .@enchant,4762; //Evasion6
			else if (.@i < 656) set .@enchant,4753; //Luck4
			else if (.@i < 671) set .@enchant,4733; //Agility4
			else if (.@i < 676) set .@enchant,4763; //Evasion12
			else if (.@i < 681) set .@enchant,4754; //Luck5
			else if (.@i < 683) set .@enchant,4734; //Agility5
			else set .@enchant,9;
			break;
		case 4: //Healer
			     if (.@slot == 4) set .@i, rand(1,375);
			else if (.@slot == 3) set .@i, rand(201,535);
			else if (.@slot == 2) set .@i, rand(301,650);
			else {
				mes "[工件研究人員]";
				mes "發生了未知錯誤。";
				close;
			}
			     if (.@i < 101) set .@enchant,4710; //Inteligence1
			else if (.@i < 201) set .@enchant,4720; //Dexterity1
			else if (.@i < 251) set .@enchant,4711; //Inteligence2
			else if (.@i < 301) set .@enchant,4721; //Dexterity2
			else if (.@i < 326) set .@enchant,4805; //Heal_Amount2
			else if (.@i < 351) set .@enchant,4712; //Inteligence3
			else if (.@i < 376) set .@enchant,4722; //Dexterity3
			else if (.@i < 476) set .@enchant,0;
			else if (.@i < 491) set .@enchant,4760; //Matk1
			else if (.@i < 506) set .@enchant,4850; //Heal_Amount3
			else if (.@i < 521) set .@enchant,4713; //Inteligence4
			else if (.@i < 536) set .@enchant,4723; //Dexterity4
			else if (.@i < 541) set .@enchant,4761; //Matk2
			else if (.@i < 546) set .@enchant,4851; //Heal_Amount4
			else if (.@i < 548) set .@enchant,4806; //Matk3
			else if (.@i < 550) set .@enchant,4852; //Heal_Amount5
			else set .@enchant,9;
			break;
		case 5: //Spell 1
			     if (.@slot == 4) set .@i, rand(1,600);
			else if (.@slot == 3) set .@i, rand(401,760);
			else if (.@slot == 2) set .@i, rand(401,766);
			else {
				mes "[工件研究人員]";
				mes "發生了未知錯誤。";
				close;
			}
			     if (.@i < 101) set .@enchant,4710; //Inteligence1
			else if (.@i < 201) set .@enchant,4720; //Dexterity1
			else if (.@i < 301) set .@enchant,4795; //HP100
			else if (.@i < 401) set .@enchant,4815; //Spell1
			else if (.@i < 451) set .@enchant,4711; //Inteligence2
			else if (.@i < 501) set .@enchant,4721; //Dexterity2
			else if (.@i < 551) set .@enchant,4796; //HP200
			else if (.@i < 601) set .@enchant,4814; //Spell2
			else if (.@i < 701) set .@enchant,0;
			else if (.@i < 716) set .@enchant,4712; //Inteligence3
			else if (.@i < 731) set .@enchant,4722; //Dexterity3
			else if (.@i < 746) set .@enchant,4797; //HP300
			else if (.@i < 761) set .@enchant,4813; //Spell3
			else if (.@i < 763) set .@enchant,4713; //Inteligence4
			else if (.@i < 765) set .@enchant,4723; //Dexterity4
			else if (.@i < 767) set .@enchant,4812; //Spell4
			else set .@enchant,9;
			break;
		case 6: //Assist 1
			     if (.@slot == 4) set .@i, rand(1,520);
			else if (.@slot == 3) set .@i, rand(321,720);
			else if (.@slot == 2) set .@i, rand(521,850);
			else {
				mes "[工件研究人員]";
				mes "發生了未知錯誤。";
				close;
			}
			     if (.@i < 81)  set .@enchant,4792; //Def6
			else if (.@i < 161) set .@enchant,4787; //Mdef4
			else if (.@i < 241) set .@enchant,4801; //SP100
			else if (.@i < 321) set .@enchant,4796; //HP200
			else if (.@i < 371) set .@enchant,4700; //Strength1
			else if (.@i < 421) set .@enchant,4720; //Dexterity1
			else if (.@i < 471) set .@enchant,4730; //Agility1
			else if (.@i < 521) set .@enchant,4740; //Vitality1
			else if (.@i < 621) set .@enchant,0;
			else if (.@i < 646) set .@enchant,4793; //Def9
			else if (.@i < 671) set .@enchant,4788; //Mdef6
			else if (.@i < 696) set .@enchant,4802; //SP150
			else if (.@i < 721) set .@enchant,4797; //HP300
			else if (.@i < 731) set .@enchant,4701; //Strength2
			else if (.@i < 741) set .@enchant,4721; //Dexterity2
			else if (.@i < 751) set .@enchant,4731; //Agility2
			else set .@enchant,9;
			break;
		case 7: //Assist 2
			     if (.@slot == 4) set .@i, rand(1,520);
			else if (.@slot == 3) set .@i, rand(321,720);
			else if (.@slot == 2) set .@i, rand(521,850);
			else {
				mes "[工件研究人員]";
				mes "發生了未知錯誤。";
				close;
			}
			     if (.@i < 81)  set .@enchant,4792; //Def6
			else if (.@i < 161) set .@enchant,4787; //Mdef4
			else if (.@i < 241) set .@enchant,4801; //SP100
			else if (.@i < 321) set .@enchant,4796; //HP200
			else if (.@i < 371) set .@enchant,4710; //Inteligence1
			else if (.@i < 421) set .@enchant,4720; //Dexterity1
			else if (.@i < 471) set .@enchant,4730; //Agility1
			else if (.@i < 521) set .@enchant,4740; //Vitality1
			else if (.@i < 621) set .@enchant,0;
			else if (.@i < 646) set .@enchant,4793; //Def9
			else if (.@i < 671) set .@enchant,4788; //Mdef6
			else if (.@i < 696) set .@enchant,4802; //SP150
			else if (.@i < 721) set .@enchant,4797; //HP300
			else if (.@i < 731) set .@enchant,4711; //Inteligence2
			else if (.@i < 741) set .@enchant,4721; //Dexterity2
			else if (.@i < 751) set .@enchant,4741; //Vitality2
			else set .@enchant,9;
			break;
		case 8: //Strength
			     if (.@slot == 4) set .@i, rand(1,525);
			else if (.@slot == 3) set .@i, rand(301,685);
			else if (.@slot == 2) set .@i, rand(451,800);
			else {
				mes "[工件研究人員]";
				mes "發生了未知錯誤。";
				close;
			}
			     if (.@i < 101) set .@enchant,4740; //Vitality1
			else if (.@i < 201) set .@enchant,4797; //HP300
			else if (.@i < 301) set .@enchant,4791; //Def3
			else if (.@i < 351) set .@enchant,4741; //Vitality2
			else if (.@i < 401) set .@enchant,4798; //HP400
			else if (.@i < 451) set .@enchant,4792; //Def6
			else if (.@i < 476) set .@enchant,4742; //Vitality3
			else if (.@i < 501) set .@enchant,4793; //Def9
			else if (.@i < 526) set .@enchant,4799; //HP500
			else if (.@i < 626) set .@enchant,0;
			else if (.@i < 641) set .@enchant,4742; //Vitality3
			else if (.@i < 656) set .@enchant,4743; //Vitality4
			else if (.@i < 671) set .@enchant,4794; //Def12
			//else if (.@i < 686) set .@enchant,01; // ??
			else if (.@i < 688) set .@enchant,4744; //Vitality5
			//else if (.@i < 690) set .@enchant,02; // ??
			else set .@enchant,9;
			break;
		case 9: //Range
			     if (.@slot == 4) set .@i, rand(1,470);
			else if (.@slot == 3) set .@i, rand(201,610);
			else if (.@slot == 2) set .@i, rand(321,750);
			else {
				mes "[工件研究人員]";
				mes "發生了未知錯誤。";
				close;
			}
			     if (.@i < 101) set .@enchant,4750; //Luck1
			else if (.@i < 201) set .@enchant,4720; //Dexterity1
			else if (.@i < 261) set .@enchant,4751; //Luck2
			else if (.@i < 321) set .@enchant,4721; //Dexterity2
			else if (.@i < 351) set .@enchant,4752; //Luck3
			else if (.@i < 381) set .@enchant,4722; //Dexterity3
			else if (.@i < 411) set .@enchant,4764; //Critical5
			else if (.@i < 441) set .@enchant,4832; //Expert_Archer1
			else if (.@i < 471) set .@enchant,4753; //Luck4
			else if (.@i < 571) set .@enchant,0;
			else if (.@i < 586) set .@enchant,4723; //Dexterity4
			else if (.@i < 601) set .@enchant,4833; //Expert_Archer2
			else if (.@i < 606) set .@enchant,4765; //Critical7
			else if (.@i < 611) set .@enchant,4834; //Expert_Archer3
			else if (.@i < 616) set .@enchant,4724; //Dexterity5
			else if (.@i < 618) set .@enchant,4835; //Expert_Archer4
			else set .@enchant,9;
			break;
		case 10: //Physical
			     if (.@slot == 4) set .@i, rand(1,600);
			else if (.@slot == 3) set .@i, rand(401,800);
			else if (.@slot == 2) set .@i, rand(601,930);
			else {
				mes "[工件研究人員]";
				mes "發生了未知錯誤。";
				close;
			}
			     if (.@i < 101) set .@enchant,4791; //Def3
			else if (.@i < 201) set .@enchant,4730; //Agility1
			else if (.@i < 301) set .@enchant,4750; //Luck1
			else if (.@i < 401) set .@enchant,4795; //HP100
			else if (.@i < 451) set .@enchant,4792; //Def6
			else if (.@i < 501) set .@enchant,4731; //Agility2
			else if (.@i < 551) set .@enchant,4751; //Luck2
			else if (.@i < 601) set .@enchant,4796; //HP200
			else if (.@i < 701) set .@enchant,0;
			else if (.@i < 726) set .@enchant,4793; //Def9
			else if (.@i < 751) set .@enchant,4732; //Agility3
			else if (.@i < 776) set .@enchant,4752; //Luck3
			else if (.@i < 801) set .@enchant,4797; //HP300
			else if (.@i < 816) set .@enchant,4733; //Agility4
			else if (.@i < 831) set .@enchant,4753; //Luck4
			else if (.@i < 833) set .@enchant,4807; //Atk_Speed1
			else set .@enchant,9;
			break;
		case 11: //Spell 2
			     if (.@slot == 4) set .@i, rand(1,600);
			else if (.@slot == 3) set .@i, rand(401,760);
			else if (.@slot == 2) set .@i, rand(401,766);
			else {
				mes "[工件研究人員]";
				mes "發生了未知錯誤。";
				close;
			}
			     if (.@i < 101) set .@enchant,4711; //Inteligence2
			else if (.@i < 201) set .@enchant,4721; //Dexterity2
			else if (.@i < 301) set .@enchant,4796; //HP200
			else if (.@i < 401) set .@enchant,4814; //Spell2
			else if (.@i < 451) set .@enchant,4712; //Inteligence3
			else if (.@i < 501) set .@enchant,4722; //Dexterity3
			else if (.@i < 551) set .@enchant,4760; //Matk1
			else if (.@i < 601) set .@enchant,4813; //Spell3
			else if (.@i < 701) set .@enchant,0;
			else if (.@i < 716) set .@enchant,4713; //Inteligence4
			else if (.@i < 731) set .@enchant,4723; //Dexterity4
			else if (.@i < 746) set .@enchant,4761; //Matk2
			else if (.@i < 761) set .@enchant,4812; //Spell4
			else if (.@i < 763) set .@enchant,4714; //Inteligence5
			else if (.@i < 765) set .@enchant,4724; //Dexterity5
			else if (.@i < 767) set .@enchant,4806; //Matk3
			else set .@enchant,9;
			break;
		default:
			mes "[工件研究人員]";
			mes "好吧，我想我錯了...";
			close;
		}

		// anti-hack
		if (callfunc("F_IsEquipIDHack", .@part, .@equip_id) ||
		    callfunc("F_IsEquipRefineHack", .@part, .@equip_refine) ||
		    callfunc("F_IsEquipCardHack", .@part, .@equip_card[0], .@equip_card[1], .@equip_card[2], .@equip_card[3]))
			close;

		if (.@equip_card[3] == 0 && .@allowed_slot < 4) {
			set .@equip_card[3],.@enchant;
		} else if (.@equip_card[2] == 0 && .@allowed_slot < 3) {
			set .@equip_card[2],.@enchant;
			if (.@enchant == 0) {
				set .@equip_card[3],0;
			}
		} else if (.@equip_card[1] == 0 && .@allowed_slot < 2) {
			set .@equip_card[1],.@enchant;
			if (.@enchant == 0) {
				set .@equip_card[2],0;
				set .@equip_card[3],0;
			}
		} else {
			mes "[工件研究人員]";
			mes "我認為工件的限制有了增強的限制。";
			close;
		}
		if (Zeny < 100000 || countitem(6380) == 0) {
			mes "[工件研究人員]";
			mes "除非您支付費用，否則我不會做這項工作。";
			close;
		}
		delitem 6380,1; //Mora_Coin
		set Zeny, Zeny-100000;
		delequip .@part;
		if (.@enchant == 9) {
			specialeffect2 EF_SUI_EXPLOSION;
			mes "[工件研究人員]";
			mes "這！";
 			mes "我...對不起，但是設備已被摧毀。";
			close;
		}
		if (.@enchant == 0) {
			specialeffect2 EF_SHIELDCHARGE;
			mes "[工件研究人員]";
			mes "由於功率平衡不匹配，因此給定的現有能力已被破壞。很不幸，但是下次請重試。";
		} else {
			specialeffect2 EF_REPAIRWEAPON;
			mes "[工件研究人員]";
			// Replacing original dialogue since it doesn't make sense.
			//mes "神器^990000"+.@slot+" will have the first enhancement retained.";
			mes "我已經成功增強了工件 ^990000"+.@equip_name$+"^000000 at socket "+.@slot+".";
		}

//		GetNonSlotItemSock2 .@equip_refine .@equip_id .@equip_card[0] .@equip_card[1] .@equip_card[2] .@equip_card[3]
		getitem2 .@equip_id,1,1,.@equip_refine,0,.@equip_card[0],.@equip_card[1],.@equip_card[2],.@equip_card[3];

		close;
	} else if (.@select == 2) {
		if (Zeny < 100000 || countitem(6380) == 0) {
			mes "[工件研究人員]";
			mes "如果您想要服務，則必須支付。";
			close;
		}
		specialeffect2 EF_REPAIRWEAPON;
		mes "[工件研究人員]";
		mes "增強能力仍然存在。";
		delitem 6380,1; //Mora_Coin
		set Zeny, Zeny-100000;

		// anti-hack
		if (callfunc("F_IsEquipIDHack", .@part, .@equip_id) || callfunc("F_IsEquipCardHack", .@part, .@equip_card[0], .@equip_card[1], .@equip_card[2], .@equip_card[3]) || callfunc("F_IsEquipRefineHack", .@part, .@equip_refine))
			close;

		delequip .@part;

//		GetNonSlotItemSock2 .@equip_refine .@equip_id .@equip_card[0] .@equip_card[1] .@equip_card[2] .@equip_card[3]
		for ( .@i = getiteminfo(.@equip_id, ITEMINFO_SLOT); .@i < MAX_SLOTS; .@i++ ) {
			if (getiteminfo(.@equip_card[.@i], ITEMINFO_SUBTYPE) == CARD_ENCHANT)
				.@equip_card[.@i] = 0;// Armor Enchant System
		}
		getitem2 .@equip_id,1,1,.@equip_refine,0,.@equip_card[0],.@equip_card[1],.@equip_card[2],.@equip_card[3];

		close;
	}
}

// Arch Bishop & Warlock Empowering :: relic_change
//============================================================
mora,124,82,4	script	Artifact Collector#blan	522,{
	if (checkweight(1201,1) == 0) {
		mes "在繼續之前，減少庫存中的物品量。";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "您的庫存過多。";
		close;
	}
	disable_items;
	emotion ET_DELIGHT;
	mes "那些莫拉文物看起來很完美！";
	mes "但是我知道您希望他們變得更好！";
	next;
	mes "[工件收集器]";
	mes "問候冒險家。在我告訴您如何賦予您的工件能力之後，我們將成為好朋友！";
	next;
	switch(select("讓我們這樣做吧！ :賦予神器力量？ :不，不適合我！")) {
	case 1:
		break;
	case 2:
		emotion ET_OK;
		mes "[工件收集器]";
		mes "您似乎是一個很好的角色法官。";
		next;
		mes "[工件收集器]";
		mes "200多年來，我一直在莫拉（Mora）使用文物。辛苦的+9！";
		next;
		select("咕嚕……+9？ ！");
		emotion ET_HUK, playerattached();
		mes "[工件收集器]";
		mes "我的業務正在收集舊文物，並將它們完善到本質上！";
		next;
		emotion ET_CRY;
		mes "[工件收集器]";
		mes "為我找到完美的工件是我一生的工作。";
		mes "再加上我們祖先的遺產的奇蹟也令人欣慰。";
		next;
		select("我知道這會很有趣。");
		emotion ET_GOODBOY;
		mes "[工件收集器]";
		mes "謝謝人類。";
		next;
		mes "[工件收集器]";
		mes "我已經這樣做已有200多年了，老實說，隨時可用的供應已經消失了，Artificer和Artifact Crafter不會再交易我了...";
		next;
		emotion ET_THINK;
		mes "[工件收集器]";
		mes "但是，也許開始訪問的人可以帶來一些新的股票！";
		next;
		select("人類……庫存？");
		emotion ET_QUESTION, playerattached();
		mes "[工件收集器]";
		mes "是的！如果人類可以給我帶來新的文物，我可以在最終的成就上努力！";
		next;
		select("最終成就？");
		emotion ET_QUESTION, playerattached();
		emotion ET_OK;
		mes "[工件收集器]";
		mes "耐心，我們會做到這一點...";
		next;
		mes "[工件收集器]";
		mes "我是貿易的收藏家，但我最大的成就是用更大的力量增強了一些文物！";
		mes "到目前為止，我只對幾種人工製品的能力進行了完善。";
		next;
		mes "[工件收集器]";
		mes "您可能只是人類可以幫助我完成計劃。";
		next;
		emotion ET_OTL;
		mes "[工件收集器]";
		mes "哦，我如何愛命運有時候...";
		next;
		mes "[工件收集器]";
		mes "+1，+2，+3，+4，+5，+6這些修補幅度不足以在我的手工藝品上工作。";
		next;
		emotion ET_OTL;
		mes "[工件收集器]";
		mes "但是+7！ +7很少見，勉強能夠在我的製作嘗試中工作。";
		next;
		select("我又要被欺負了...");
		emotion ET_SCRATCH, playerattached();
		mes "[工件收集器]";
		mes "對你！我知道，即使沒有朋友問...";
		next;
		select("我不確定是否...");
		emotion ET_QUESTION, playerattached();
		mes "[工件收集器]";
		mes "當然，我會接受您的幫助！  找到我...";
		next;
		mes "- 金桿員工 -";
		mes "- 水上工作人員 -";
		mes "- 深紅色工作人員 -";
		mes "- 森林工作人員 -";
		mes "- 憐憫的工作人員 -";
		mes "- 判斷的狼牙棒 -";
		next;
		select("還要別的嗎？");
		emotion ET_QUESTION, playerattached();
		mes "[工件收集器]";
		mes "除了+7之外，還需要在工件上進行非常具體的魅力，這有助於催化這一過程。";
		next;
		mes "[工件收集器]";
		mes "如果缺少+7或特定的結界，我將無法做到。";
		next;
		select("那麼煉器會被保留嗎？");
		emotion ET_HUK, playerattached();
		emotion ET_FRET;
		mes "[工件收集器]";
		mes "不，但是你會回來的好得多！";
		next;
		mes "[工件收集器]";
		mes "到目前為止，您想知道我要尋找的文物的更多信息嗎？";
		next;
		emotion ET_QUESTION;
		mes "[工件收集器]";
		mes "繼續問！";
		next;
		setarray .@artifacts[0],1657,16013,2007,2008,2009,2010;
		setarray .@empowered[0],1660,16018,2011,2012,2013,2014;
		while(1) {
			set .@i, select("我認為我不感興趣:仁慈法杖:審判之鎚:金棒法杖:水色法杖:猩紅法杖:森林法杖")-2;
			if (.@i == -1) {
				emotion ET_QUESTION;
				mes "[工件收集器]";
				mes "好吧，也許有一天你會。";
				close;
			}
			mes "[工件收集器]";
			mes getitemname(.@artifacts[.@i])+"當然，必須將其精製成+7或更高，才能將其提煉成一個結界。";
			next;
			switch(.@i) {
			case 0:
				setarray .@enchants[0],4761,4723,4714;
				set .@str$, "MATK+2%, DEX+4, INT+5";
				break;
			case 1:
				setarray .@enchants[0],4767,4723,4704;
				set .@str$, "ATK+3%, DEX+4, STR+5";
				break;
			default:
				setarray .@enchants[0],4761,4713;
				set .@str$, "MATK+2%, INT+4";
				break;
			}
			mes "[工件收集器]";
			mes "它還必須帶有任何這些魅力："+.@str$+" to be craftable by me.";
			next;
			select(getitemname(.@empowered[.@i])+" attributes?");
			callsub L_ShowInfo, .@empowered[.@i];
			mes "[工件收集器]";
			mes "但是，如果您確實得到一個，請讓我努力，我在求您。";
			next;
		}
	case 3:
		mes "[工件收集器]";
		mes "祝您自己美好的一天。再見~";
		close;
	}
	emotion ET_SPARK;
	mes "[工件收集器]";
	mes "讓我看看你帶給我的東西。";
	next;
	if (!getequipisequiped(EQI_HAND_R)) {
		emotion ET_FRET;
		mes "[工件收集器]";
		mes "我不知道您要做什麼...我無法增強您沒有的東西。";
		close;
	}
	set .@equip_id, getequipid(EQI_HAND_R);
	.@equip_refine = getequiprefinerycnt(EQI_HAND_R);
	setarray .@equip_card[0], getequipcardid(EQI_HAND_R,0), getequipcardid(EQI_HAND_R,1), getequipcardid(EQI_HAND_R,2),getequipcardid(EQI_HAND_R,3);
	switch(.@equip_id) {
	case 2007: //Golden_Rod_Staff
	case 2008: //Aqua_Staff
	case 2009: //Crimson_Staff
	case 2010: //Forest_Staff
		if (.@equip_card[2] == 4761 || .@equip_card[3] == 4761 || //Matk2
		    .@equip_card[2] == 4713 || .@equip_card[3] == 4713)   //Inteligence4
			set .@empowered,.@equip_id+4; //Golden_Rod_Staff2,Aqua_Staff2,Crimson_Staff2,Forest_Staff2
		break;
	case 1657: //Wand_Of_Affection
		if (.@equip_card[2] == 4761 || .@equip_card[3] == 4761 || //Matk2
		    .@equip_card[2] == 4714 || .@equip_card[3] == 4714 || //Inteligence5
		    .@equip_card[2] == 4723 || .@equip_card[3] == 4723)   //Dexterity4
			set .@empowered,1660; //Wand_Of_Affection2
		break;
	case 16013: //Mace_Of_Judgement
		if (.@equip_card[2] == 4723 || .@equip_card[3] == 4723 || //Dexterity4
		    .@equip_card[2] == 4704 || .@equip_card[3] == 4704 || //Strength5
		    .@equip_card[2] == 4767 || .@equip_card[3] == 4767)   //Atk3
			set .@empowered,16018; //Mace_Of_Judgement2
		break;
	default:
		emotion ET_FRET;
		mes "[工件收集器]";
		mes "您擁有的武器不是我可以使用的工件之一。";
		close;
	}
	if (.@equip_refine < 7) {
		emotion ET_FRET;
		mes "[工件收集器]";
		mes "我必須堅持認為工件的精煉水平至少為+7！";
		close;
	}
	if (!.@empowered) {
		emotion ET_FRET;
		mes "[工件收集器]";
		mes "這些屬性對我的研究過程不會有用，請嘗試重新旋轉它們。";
		close;
	}
	emotion ET_SEXY;
	mes "[工件收集器]";
	mes "我很興奮！";
	mes "你給我帶來了我需要的一切！";
	next;
	emotion ET_OK;
	mes "[工件收集器]";
	mes "如果您準備好，我將向您展示我可以用您的 +做什麼" + .@equip_refine + " Artifact!";
	next;
	mes "[工件收集器]";
	mes "我要帶你的 ^ff0000"+getequipname(EQI_HAND_R)+"^000000 and exchange it, are you ready?";
	next;
	switch(select("NOOO!:是的，我準備好了！ :之後會怎樣？")) {
	case 1:
		emotion ET_FRET;
		mes "[工件收集器]";
		mes "你一定是在開玩笑...你有我的希望...";
		close;
	case 2:
		break;
	case 3:
		callsub L_ShowInfo, .@empowered;
		mes "[工件收集器]";
		mes "您肯定要繼續嗎？";
		next;
		if(select("不，我不:是的，做吧！") == 1) {
			emotion ET_FRET;
			mes "[工件收集器]";
			mes "你一定是在開玩笑...你有我的希望...";
			close;
		}
		break;
	}
	emotion ET_SMILE;

	// anti-hack
	if (callfunc("F_IsEquipIDHack", EQI_HAND_R, .@equip_id) || callfunc("F_IsEquipCardHack", EQI_HAND_R, .@equip_card[0], .@equip_card[1], .@equip_card[2], .@equip_card[3]) || callfunc("F_IsEquipRefineHack", EQI_HAND_R, .@equip_refine))
		close;

	delequip EQI_HAND_R;
	getitem .@empowered,1;
	mes "[工件收集器]";
	mes "這是完美的，您會很高興！再見朋友~";
	close;

L_ShowInfo:
	mes "[工件收集器]";
	mes getitemname(getarg(0));
	switch(getarg(0)) {
	case 1660: //Wand_Of_Affection2
		mes "一隻手 /攻擊：30";
		mes "體重：50 /任何性別";
		mes "僅大主教";
		mes "武器級別：4 / ^ff0000頻率：130 ^000000";
		mes "徒步+180，智力+4。";
		mes "增加20％的治療獎金。";
		mes "如果穿著長袍，鞋子和憐憫的長袍，則增加了45％的康復獎金，並消耗“治愈” 50。";
		mes "當收到緊密的物理攻擊時，LV.1 Silentium將以一定的速度歸咎於。";
		mes "在裁定清除，勞達拉姆斯和勞達斯的技能後，延遲了3秒。";
		break;
	case 16018: //Mace_Of_Judgement2
		mes "狼牙棒 /攻擊：170";
		mes "重量：120 /任何性別";
		mes "僅大主教";
		mes "武器級別：4 / ^ff0000頻率：130 ^000000";
		mes "遠足 + 180，力量 + 2，智力 + 2。";
		mes "身體和魔法攻擊有機會將傷害損害增加40％，持續7秒鐘。";
		mes "如果戴上判斷力，鞋子和披肩，將對不死的傷害增加30％。";
		mes "將阿多拉姆斯的損害增加200％，並將阿多拉姆斯的SP成本提高30。";
		break;
	case 2011: //Golden_Rod_Staff2
		mes "員工 /攻擊：30";
		mes "體重：90 /任何性別";
		mes "僅術士";
		mes "武器級別：4 / ^ff0000頻率：130 ^000000";
		mes "智力+5，高+270。";
		mes "將木星雷電損害增加30％。";
		mes "如果穿著金色的長袍，金鞋和金球，將風魔損傷增加60％。";
		mes "將地球魔術損害降低60％，對地球的抵抗力降低50％。";
		break;
	case 2012: //Aqua_Staff2
		mes "員工 /攻擊：30";
		mes "體重：90 /任何性別";
		mes "僅術士";
		mes "武器級別：4 / ^ff0000頻率：130 ^000000";
		mes "智力+5，高+270。";
		mes "將冷螺栓和霜凍潛水員損壞增加30％。";
		mes "如果穿著水袍，鞋子和球磨損，將水魔損傷增加60％。";
		mes "將風魔損傷降低60％，對風的阻力減少了50％。";
		break;
	case 2013: //Crimson_Staff2
		mes "員工 /攻擊：30";
		mes "體重：90 /任何性別";
		mes "僅術士";
		mes "武器級別：4 / ^ff0000頻率：130 ^000000";
		mes "智力+5，高+270。";
		mes "將火螺栓和火球損壞增加30％。";
		mes "如果穿著深紅色的長袍，鞋子和球體，將火魔術損害增加60％。";
		mes "將水魔術損害降低60％，對水的抵抗力降低50％。";
		break;
	case 2014: //Forest_Staff2
		mes "員工 /攻擊：30";
		mes "體重：90 /任何性別";
		mes "僅術士";
		mes "武器級別：4 / ^ff0000頻率：130 ^000000";
		mes "智力+5，高+270。";
		mes "將地球尖峰和天堂的驅動損害增加30％。";
		mes "如果穿著森林長袍，鞋子和球體磨損，將魔法傷害增加60％。";
		mes "將火魔術損害降低60％，抵抗火力損害50％。";
		break;
	}
	next;
	return;
}

// Other Enchants :: sangjo
//============================================================
function	script	F_Mora_Enchant	{
	specialeffect2 EF_REPAIRWEAPON;
	progressbar "ffff00",3;
	delitem 6380,5; //Mora_Coin
	if (countitem(getarg(0)) < 1)
		return 0;
	delitem getarg(0),1;
	set .@i, rand(1,4568);
	if (.@i <= 3168) {
		// Basic combinations
		// (raw: .@i increments by 11)
		setarray .@enchant_slot1[0],4766,4767,4764,4765,4762,4763,4760,4761; //Atk2,Atk3,Critical5,Critical7,Evasion6,Evasion12,Matk1,Matk2
		setarray .@enchant_slot2[0],4720,4721,4710,4711,4750,4751; //Dexterity1,Dexterity2,Inteligence1,Inteligence2,Luck1,Luck2
		setarray .@enchant_slot3[0],4700,4701,4730,4731,4740,4741; //Strength1,Strength2,Agility1,Agility2,Vitality1,Vitality2
		setarray .@enchants[1],
			.@enchant_slot1[rand(getarraysize(.@enchant_slot1))],
			.@enchant_slot2[rand(getarraysize(.@enchant_slot2))],
			.@enchant_slot3[rand(getarraysize(.@enchant_slot3))];
	}
	else if (.@i <= 3179) setarray .@enchants[1],4761,4720,4700; //Matk2 Dexterity1 Strength1
	else if (.@i <= 3181) setarray .@enchants[1],4761,4712,4712; //Matk2 Inteligence3 Inteligence3
	else if (.@i <= 3183) setarray .@enchants[1],4765,4732,4732; //Critical7 Agility3 Agility3
	else if (.@i <= 3185) setarray .@enchants[1],4763,4752,4753; //Evasion12 Luck3 Luck4
	else if (.@i <= 3187) setarray .@enchants[1],4763,4742,4742; //Evasion12 Vitality3 Vitality3
	else if (.@i <= 3189) setarray .@enchants[1],4763,4722,4722; //Evasion12 Dexterity3 Dexterity3
	else if (.@i <= 3191) setarray .@enchants[1],4742,4742,4742; //Vitality3 Vitality3 Vitality3
	else if (.@i <= 3193) setarray .@enchants[1],4761,4722,4722; //Matk2 Dexterity3 Dexterity3
	else if (.@i <= 3195) setarray .@enchants[1],4767,4702,4702; //Atk3 Strength3 Strength3
	else if (.@i <= 3197) setarray .@enchants[1],4763,4732,4732; //Evasion12 Agility3 Agility3
	else if (.@i <= 4568) return 0;

	getitem2 getarg(0),1,1,0,0,0,.@enchants[1],.@enchants[2],.@enchants[3];
	return 1;
}
mora,105,176,4	script	Master Tailor#pa0829	509,{
	disable_items;
	if (checkweight(1201,1) == 0) {
		mes "您有太多事情可以做到這一點。扔掉其中的一些，然後重試。";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "您的體重太多了。減輕體重，然後重試。";
		close;
	}
	if (countitem(6380) < 5 || countitem(15024) < 1) {
		mes "[大師裁縫]";
		mes "有了我的觸摸，我可以將典型的軍隊填充變成一件藝術品。我是裁縫大師凱（Kay），用陸軍槳板創造藝術品。";
		next;
		mes "[大師裁縫]";
		mes "好吧，名字叫什麼？如果您帶上 ^ff00005莫拉硬幣和陸軍填充 ^000000，我可以將您的軍隊填充變成一件藝術品。";
		if (countitem(6380)) {
			next;
			mes "[大師裁縫]";
			mes "我碰巧有幾個軍隊插頭。你想買一個嗎？價格是1莫拉硬幣。太便宜了。";
			next;
			switch(select("也許下次吧。 :我現在就買一個。")) {
	 		case 1:
				mes "[大師裁縫]";
				mes "好吧，我明白。";
				mes "如果您改變主意，請回來。";
				close;
			case 2:
				delitem 6380,1; //Mora_Coin
				getitem 15024,1; //Army_Padding
				mes "[大師裁縫]";
				mes "這裡是。";
				mes "這非常好又蓬鬆。請回來。";
				close;
			}
		}
		close;
	}
	mes "[大師裁縫]";
	mes "您是否來將藝術添加到您的一支陸軍槳上？";
	next;
	switch(select("請告訴我更多信息:是的，我有。")) {
	case 1:
		mes "[大師裁縫]";
		mes "典型的軍隊填充不夠溫暖。皮膚上感覺很粗糙，看起來不好。和藝術價值？它幾乎沒有。";
		next;
		mes "[大師裁縫]";
		mes "但是，我將用天鵝絨線程繡花，並在其中添加三個選項。";
		next;
		mes "[大師裁縫]";
		mes "帶我 ^8888005 Mora Coins ^000000和軍隊填充，我們可以一起添加一些藝術品！";
		close;
	case 2:
		mes "[大師裁縫]";
		mes "我告訴您以防萬一 - 無論是嶄新的還是以前已經被修復的，我都會做任何我需要做的事情。";
		next;
		mes "[大師裁縫]";
		mes "因此，如果您與自己的喜歡一起填補了一支軍隊填充物，請將其放在安全的地方，然後回來。";
		next;
		mes "[大師裁縫]";
		mes "還有另一件事 - 一旦我無法添加藝術，它就會變得無法使用...在這種情況下，您需要購買新的藝術品。";
		next;
		switch(select("來吧，急什麼？ :好的！我們開始做吧！ ！")) {
		case 1:
			mes "[大師裁縫]";
			mes "你這人怎麼回事？";
			mes "村民讓我足夠忙。";
			close;
		case 2:
			if (countitem(6380) < 5 || countitem(15024) == 0) {
				mes "[大師裁縫]";
				mes "看起來您沒有所需的一切。";
				next;
				mes "[大師裁縫]";
				mes "在我完成工作之前，您必須和您一起有5枚Mora硬幣和一支軍隊填充。";
				close;
			}
			if (callfunc("F_Mora_Enchant",15024) == 0) {
				mes "[大師裁縫]";
				mes "哦......";
				mes "我不敢相信我搞砸了。";
				next;
				mes "[大師裁縫]";
				mes "我想單獨待一會兒。離開！";
				close;
			}
			mes "[大師裁縫]";
			mes "我的藝術看起來很棒。";
			close;
		}
	}
}

mora,123,177,6	script	Pendant Crafter#pa0829	509,{
	disable_items;
	if (checkweight(1201,1) == 0) {
		mes "您有太多事情可以做到這一點。扔掉其中的一些，然後重試。";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "您的體重太多了。減輕體重，然後重試。";
		close;
	}
	if (countitem(6380) < 5 || countitem(2858) == 0) {
		mes "[吊墜手工藝品]";
		mes "我的工作是在監護人的吊墜中擦亮石頭，然後在上面雕刻出具有特殊力量的符號。";
		next;
		mes "[吊墜手工藝品]";
		mes "該過程使監護人的吊墜比普通配件更大。";
		next;
		mes "[吊墜手工藝品]";
		mes "如果您有興趣，我可以為 ^ff00005 Mora Coins ^000000的吊墜工作。當然，您需要擁有監護人的吊墜，以便我可以與您合作。";
		close;
	}
	mes "[吊墜手工藝品]";
	mes "您是否開始升級監護人的吊墜？";
	next;
	switch(select("請告訴我更多信息:是的，我有。")) {
	case 1:
		mes "[吊墜手工藝品]";
		mes "我的工作是在監護人的吊墜中擦亮石頭，然後在上面雕刻出具有特殊力量的符號。";
		next;
		mes "[吊墜手工藝品]";
		mes "該過程使監護人的吊墜比普通配件更大。";
		next;
		mes "[吊墜手工藝品]";
		mes "如果您有興趣，我可以為 ^ff00005 Mora Coins ^000000的吊墜工作。當然，您需要擁有監護人的吊墜，以便我可以與您合作。";
		close;
	case 2:
		mes "[吊墜手工藝品]";
		mes "我告訴你以防萬一 -";
		mes "如果我處理以前升級的衛報吊墜，它將失去其原始力量。";
		next;
		mes "[吊墜手工藝品]";
		mes "更糟糕的是，它可能會失去力量並成為普通的吊墜。當然，石材不像布一樣易受傷害，因此您不會失去吊墜本身。";
		next;
		switch(select("來吧，急什麼？ :好的！我們開始做吧！ ！")) {
		case 1:
			mes "[吊墜手工藝品]";
			mes "當你不著急的時候回來。我總是有很多時間。";
			close;
		case 2:
			if (countitem(6380) < 5 || countitem(2858) == 0) {
				mes "[吊墜手工藝品]";
				mes "看起來您沒有所需的一切。";
				next;
				mes "[吊墜手工藝品]";
				mes "在我完成工作之前，您必須擁有5個Mora硬幣和一個衛報吊墜。";
				close;
			}
			if (callfunc("F_Mora_Enchant",2858) == 0) {
				getitem 2858,1; //Pendant_Of_Guardian
				mes "[吊墜手工藝品]";
				mes "什麼~!!";
				mes "地球到底是什麼問題！ ！";
				close;
			}
			mes "[吊墜手工藝品]";
			mes "看起來我做到了！";
			close;
		}
	}
}

mora,134,166,4	script	Bulberry Westhood#pa0829	509,{
	disable_items;
	if (checkweight(1201,1) == 0) {
		mes "您有太多事情可以做到這一點。扔掉其中的一些，然後重試。";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "您的體重太多了。減輕體重，然後重試。";
		close;
	}
	if (countitem(6380) < 5 || countitem(2568) == 0) {
		mes "[巴寶莉·維斯特伍德]";
		mes "我是Bulberry Westhood，保持了高質量的引擎蓋的傳統。";
		next;
		mes "[巴寶莉·維斯特伍德]";
		mes "我只處理高質量的物品 - 而不是來自市場的隨機圍巾。";
		next;
		mes "[巴寶莉·維斯特伍德]";
		mes "如果您認為您認為質量足夠高的東西，請與 ^ff00005 Mora Coins ^000000一起找到我。";
		next;
		mes "[巴寶莉·維斯特伍德]";
		mes "我可以用自己的手提高其高質量。";
		close;
	}
	mes "[巴寶莉·維斯特伍德]";
	mes "因此，您有Loki的圍巾1042特別版。您真的很關注質量。我可以立即開始研究嗎？";
	next;
	switch(select("我不明白:是的，請。")) {
	case 1:
		mes "[巴寶莉·維斯特伍德]";
		mes "就像我說的那樣，我只處理高質量的物品 - 而不是來自市場的隨機圍巾。";
		next;
		mes "[巴寶莉·維斯特伍德]";
		mes "您擁有的這條Loki的圍巾很棒。這是一款限量版產品，上面有Loki的波峰！";
		next;
		mes "[巴寶莉·維斯特伍德]";
		mes "我的專長是以很小的成本來伸出隱藏的力量。";
		mes "5莫拉硬幣。";
		next;
		mes "[巴寶莉·維斯特伍德]";
		mes "如果您改變主意，請回來。";
		close;
	case 2:
		mes "[巴寶莉·維斯特伍德]";
		mes "我告訴你以防萬一 -";
		mes "如果我處理以前升級的Loki圍巾，它將失去其原始力量。";
		next;
		mes "[巴寶莉·維斯特伍德]";
		mes "更糟糕的是，它可能會失去所有的力量成為普通的圍巾。";
		next;
		mes "[巴寶莉·維斯特伍德]";
		mes "當然，Loki的圍巾是一件優質的物品，因此您不會在此過程中失去圍巾本身。";
		next;
		switch(select("也許稍後，先生……:我想擁有一件優質物品！")) {
		case 1:
			mes "[巴寶莉·維斯特伍德]";
			mes "哈...！";
			mes "當您可以立即擁有最優質的物品時，您會說“以後”？好吧，擁有自己的方式。";
			close;
		case 2:
			if (countitem(6380) < 5 || countitem(2568) == 0) {
				mes "[巴寶莉·維斯特伍德]";
				mes "看來您並不需要所有您需要的一切。";
				next;
				mes "[巴寶莉·維斯特伍德]";
				mes "您必須擁有5枚Mora硬幣和一條Loki的圍巾，然後才能擁有最優質的物品。";
				close;
			}
			if (callfunc("F_Mora_Enchant",2568) == 0) {
				getitem 2568,1; //Muffler_Of_Roki
				mes "[巴寶莉·維斯特伍德]";
				mes "aaarrgghh，這是不可能的！";
				mes "我的！我的Loki的圍巾！";
				next;
				mes "[巴寶莉·維斯特伍德]";
				mes "哦，對於我可恥的行為，我深表歉意。我太沮喪了。";
				next;
				mes "[巴寶莉·維斯特伍德]";
				mes "幸運的是，在我開始研究它之前，它仍然處於原始狀態。它不會被撕裂或伸展。畢竟這是一個高質量的項目。哦，ho~";
				close;
			}
			mes "[巴寶莉·維斯特伍德]";
			mes "哇~任務完整！";
			close;
		}
	}
}
