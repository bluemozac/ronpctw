//===== rAthena Script =======================================
//= Charleston in Distress
//===== Description: =========================================
//= [Official Conversion]
//= Charleston in Distress Instance
//===== Changelogs: ==========================================
//= 1.0 First version. [Capuche]
//============================================================

verus04,75,114,5	script	Charleston#mcd	4_F_CHARLESTON02,{
	cutin "nale01.bmp",0;
	if (BaseLevel < 130) {
		mes "[查爾斯頓]";
		mes "我正在尋找至少130級，健康，沒有慢性病，而不是處方藥的冒險家。";
		close3;
	}
	if (isbegin_quest(13186) == 0) {
		switch( isbegin_quest(13184) ) {
		case 0:
			mes "[查爾斯頓]";
			mes "你好，冒險家。我是查爾斯頓（Charleston），該項目的發起人是獨立的。";
			next;
			mes "[查爾斯頓]";
			mes "目前，我無法移動，對我的一個組件有問題。您能幫我從工廠獲得替換零件嗎？";
			next;
			if (select( "Sure.", "No." ) == 1) {
				mes "[查爾斯頓]";
				mes "如果您至少有130級，健康，沒有慢性疾病，而不是處方藥，那麼這項任務就不會很困難。";
				next;
				mes "[查爾斯頓]";
				mes "請使用右側的機器進入工廠。進入後，保持冷靜並按照指示進行操作。";
				setquest 13184;
			}
			close3;
		case 1:
			mes "[查爾斯頓]";
			mes "請使用我旁邊的機器進入工廠。進入後，保持冷靜並按照指示進行操作。";
			close3;
		case 2:
			cutin "nale03.bmp",0;
			mes "[查爾斯頓]";
			mes "我不知道它已經站在這裡多久了，但是自從我能夠移動以來已經很長時間了...";
			next;
			mes "[查爾斯頓]";
			mes "目前，只有我的頭能移動，薩利赫（Saleh）她幫助我打開了器官可以回到那個時候...";
			next;
			mes "[查爾斯頓]";
			mes "如果我被說服，我不會這樣做。";
			next;
			mes "[查爾斯頓]";
			mes "無論如何，我現在什麼都沒有...只是能夠再次站起來，所以我希望當時派一個像您這樣的冒險家。";
			next;
			mes "[查爾斯頓]";
			mes "^ff0000it什麼都沒有改變。 ^000000";
			next;
			mes "[查爾斯頓]";
			mes "僅基於OS的辛勤工作...在Charleston 2的另一部分為您提供幫助，這將是“非常好”的機器人！";
			next;
			mes "[查爾斯頓]";
			mes "有可能遇到一個好朋友進入一個好的機器人，所以我必須繼續繼續前進，謝謝！";
			erasequest 13184;
			if (isbegin_quest(13186) == 0) {
				setquest 13186;
				completequest 13186;
			}
			if (isbegin_quest(13187) > 0)
				erasequest 13187;
			getexp 1500000,500000;
			close3;
		}
		end;
	}
	cutin "nale03.bmp",0;
	switch( isbegin_quest(13184) ) {
	case 0:
		mes "[查爾斯頓]";
		mes "你不是失望嗎？您真的要讓您的努力徒勞地嗎？因為那真的很愚蠢。我建議您重新考慮。";
		next;
		if (select( "I'll try again if there's a sliver of hope.", "I'll think again." ) == 1) {
			mes "[查爾斯頓]";
			mes "我是機器人。我做我編程的要做的事情，沒有其他重要的事情。";
			next;
			mes "[查爾斯頓]";
			mes "諷刺，不是嗎？機器人本來應該是情緒的，但是我在這裡，對過去感到沮喪。";
			next;
			mes "[查爾斯頓]";
			mes "你可以判斷我，但你不能阻止我。只要有希望，我就會繼續嘗試。";
			next;
			mes "[查爾斯頓]";
			mes "我的心停了下來，但我仍然可以說話。請幫我。";
			setquest 13184;
		}
		close3;
	case 1:
		mes "[查爾斯頓]";
		mes "如果您對不變的過去，不清楚的未來和令人沮喪的禮物感到幻滅，那麼我就不會強迫您。";
		next;
		if (select( "I'll try again if there's a sliver of hope.", "I give up." ) == 1) {
			mes "[查爾斯頓]";
			mes "只要有希望，我就會繼續嘗試。";
			close3;
		}
		erasequest 13184;
		close3;
	case 2:
		mes "[查爾斯頓]";
		mes "我無法阻止它發生或改變過去。但是也許其他人可以。";
		next;
		mes "[查爾斯頓]";
		mes "我會等那個人多長時間。";
		erasequest 13184;
		getexp 1500000,500000;
		close3;
	}
	end;
/*
// The sprite is supposed to be changed
OnInit:
	end;
*/
}

verus04,81,112,5	script	Machine#mcd	PORTAL,{
	if (BaseLevel < 130) {
		mes "[機器]";
		mes "^ff0000you必須是130級才能使用這台機器。 ^000000";
		close;
	}
	if (isbegin_quest(13184) != 1) {
		mes "^ff0000您需要查爾斯頓使用這台機器的權限。 ^000000";
		close;
	}
	.@party_id = getcharid(1);
	if (.@party_id < 1) {
		mes "^ff0000 you首先必須形成/加入至少1人參加此地牢的聚會。 ^000000";
		close;
	}
	switch( checkquest(13185,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "^FF0000這台機器無法在上次訪問後20小時內訪問。 ^000000";
		close;
	case 2:
		mes "該機器現在可供使用。";
		erasequest 13185;
		close;
	}
	.@p_name$ = getpartyname(.@party_id);
	.@p_leader$ = getpartyleader(.@party_id);
	.@md_name$ = "Charleston in Distress";
	if (is_party_leader() == true)
		.@menu$ = "Open the dimensional portal.";

	switch( select( .@menu$, "Enter the Charleston Factory.", "Cancel." ) ) {
	case 1:
		if (instance_create(.@md_name$) < 0) {
			mes "派對：" + .@p_name$ + "";
			mes "領導者：" + .@p_leader$ + "";
			mes "^0000ff" + .@md_name$ + " ^000000- Unknown error";
			close;
		}
		mes "^ff000000 前綴為傳送 ...^000000";
		mes "^ff0000please等待。 ^000000";
		close;
	case 2:
		if (is_party_leader() == false) {
			mes "[機器]";
			mes "傳送...";
			next;
			mes "[機器]";
			mes "^FF0000這台機器無法在上次訪問後20小時內訪問。 ^000000";
			next;
		}
		switch( instance_enter(.@md_name$) ) {
		case IE_OTHER:
			mes "[機器]";
			mes "^ff0000an發生了未知錯誤。 ^000000";
			close;
		case IE_NOINSTANCE:
			mes "[機器]";
			mes "^ff0000 your黨的領導人尚未創造時間破解。 ^000000";
			close;
		case IE_NOMEMBER:
			mes "[機器]";
			mes "^ff0000laly of該黨的成員可以進入紀念地牢。 ^000000";
			close;
		case IE_OK:
			setquest 13185;
			specialeffect2 EF_READYPORTAL2;
			specialeffect2 EF_PORTAL2;
			mapannounce "verus04", strcharinfo(0) + " of the party, " + getpartyname( getcharid(1) ) + ", is entering the " + .@md_name$ + ".", bc_map, 0x00ff99;
			end;
		}
		end;
	case 3:
		end;
	}
	end;
}

// GM NPC
sec_in02,10,13,3	script	Charleston#sara	4_F_CHARLESTON01,{
	mes "查爾斯頓測試危機Ver130603a";
	if (callfunc("F_GM_NPC",1854,0,0,9999) < 1)
		close;
	switch( select( "20 hour cooldown reset", "Returns the status of the initial solution task", "Establish a copy clearance status" ) ) {
	case 1:
		if (isbegin_quest(13185))
			erasequest 13185;
		close;
	case 2:
		if (isbegin_quest(13184))
			erasequest 13184;
		if (isbegin_quest(13186))
			erasequest 13186;
		if (isbegin_quest(13188))
			erasequest 13188;
		close;
	case 3:
		if (isbegin_quest(13184) == 0)
			setquest 13184;
		if (isbegin_quest(13184) == 1)
			completequest 13184;
		close;
	}
	end;
}

1@mcd,127,277,4	script	Charleston 1#0	4_F_CHARLESTON01,3,3,{
	cutin "dalle01.bmp",2;
	if ('ep15_1_mcd01 == 0) {
		mes "[查爾斯頓1]";
		mes "嗯...我必須等多久？";
		emotion 19;
		close3;
	}
	mes "[查爾斯頓1]";
	mes "遵循向左的走廊，請記住，只有您才能保護自己。";
	close3;

OnTouch_:
	cutin "dalle01.bmp",2;
	if ('ep15_1_mcd01 != 0) {
		mes "[查爾斯頓1]";
		mes "遵循向左的走廊，請記住，只有您才能保護自己。";
		close3;
	}
	mes "[查爾斯頓1]";
	mes "最後，你在這裡！我一直在等你。";
	npctalk "Finally, you're here! I've been waiting for you.";
	emotion 0;
	next;
	mes "[查爾斯頓1]";
	mes "我們沒有時間，所以讓我追逐。當前，查爾斯頓工廠處於排名B安全警報級別，這意味著已激活了安全設備。";
	npctalk "We don't have time, so let me cut to the chase. Currently, the Charleston Factory is under Rank B security alert level, meaning that the security devices have been activated.";
	next;
	mes "[查爾斯頓1]";
	mes "移至向左的走廊，摧毀那裡的安全設備，然後前往下一個區域。";
	npctalk "Move to the leftward hallway, destroy security devices in there, and then head on to the next zone.";
	emotion 19;
	next;
	mes "[查爾斯頓1]";
	mes "不必擔心安全設備。它們可以輕鬆修復。 Ve博士在工廠3北部的實驗室裡。";
	npctalk "Don't worry about the security devices. They can be repaired easily. Dr. Ve is in his lab north of Factory Line 3.";
	next;
	mes "[查爾斯頓1]";
	mes "Ve博士可以告訴您一切。匆忙！";
	npctalk "Dr. Ve can tell you everything. Hurry!";
	emotion 19;
	'ep15_1_mcd01 = 1;
	monster 'map_name$,24,275, "Security Robot", 3127,1, instance_npcname("Charleston 1#0") + "::OnMyMobDead";	// KICK_STEP
	close3;

OnMyMobDead:
	if (mobcount( 'map_name$, instance_npcname("Charleston 1#0") + "::OnMyMobDead" ) < 1) {
		initnpctimer;
		mapannounce 'map_name$, "Charleston 1: Gate 1 has been disarmed. Please move southwest for the next gate.", bc_map, 0xffff00;
	}
	end;
OnTimer1000:
	donpcevent instance_npcname("1gate#1") + "::OnStart";
	stopnpctimer;
	end;
}

1@mcd,120,224,5	script	Charleston 2#0	4_F_CHARLESTON02,{
	cutin "nale04.bmp",0;
	mes "[查爾斯頓2]";
	mes "＃％@egd＆＃（@＃...";
	emotion 53;
	next;
	mes "- 她發出了奇怪的聲音，但無法動彈。 -";
	close3;
}

1@mcd,116,213,5	script	Dr. Ve#1	4_M_DOCTOR,2,2,{
	if ('ep15_1_mcd01 == 1) {
		mes "- 他正忙著塗抹東西，走近與他交談。";
		close;
	}
	mes "- 他正忙著塗東西。你不應該打擾他。";
	close;

OnTouch_:
	if (is_party_leader() == false) {
		mes "[博士ve]";
		mes "讓我和你的領導者談談。我沒有時間給所有人。";
		close;
	}
	if ('ep15_1_mcd01 > 2)
		end;
	if ('ep15_1_mcd01 == 2) {
		mes "[博士ve]";
		mes "我不在乎你和誰在一起。我只需要知道您是否可以幫助我。";
		'ep15_1_mcd01 = 2;
		next;
		if (select( "I can help.", "I'm busy." ) == 2) {
			mes "[博士ve]";
			mes "嘆息，我不在乎誰，只要得到我需要的幫助。";
			npctalk "Dr. Ve: Sigh, I don't care who, so long as I get the help I need.";
			close;
		}
		mes "[博士ve]";
		mes "您是我們一直在等待的救星！查爾斯頓1將告訴您我們需要修復查爾斯頓2的內容。";
		npctalk "Dr. Ve: You're the savior we've been waiting for! Charleston 1 will tell you what we need to repair Charleston 2.";
		if ('ep15_1_mcd01 == 2)
			'ep15_1_mcd01 = 3;
		close;
	}
	if ('ep15_1_mcd01 == 1) {
		.@charleston_1$ = instance_npcname("Charleston 1#1");
		mes "[博士ve]";
		mes "查爾斯頓1。查爾斯頓2已被強行連接到主計算機的一部分，我無法控制她。";
		npctalk "Dr. Ve: Charleston 1. Charleston 2 has been forcibly connected to a part of the main computer, and I can't control her.";
		next;
		cutin "dalle02.bmp",2;
		mes "[查爾斯頓1]";
		mes "她是一個機器人；她應該遲早停止。";
		npctalk "Charleston 1: She's a robot; she should stop sooner or later.", .@charleston_1$;
		next;
		cutin "",255;
		mes "[博士ve]";
		mes "她的壽命設備將使她至少保持50年的運行。工廠不會生存那麼長時間。";
		npctalk "Dr. Ve: The Longevity device in her will keep her running at least for 50 years. The factory is not going to survive that long.";
		next;
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "那我們別無選擇。我們有專家與我們在一起是一件好事。";
		npctalk "Charleston 1: Then we have no choice. It's good that we have the specialist with us.", .@charleston_1$;
		next;
		select("你在說我嗎？");
		unittalk getcharid(3), "Are you talking about me?";
		mes "[查爾斯頓1]";
		mes "前一段時間，一位名為 ^ff0000shalosh ^000000的女士訪問了我們，而查爾斯頓2（Charleston 2）則是用於運輸的產品。";
		npctalk "Charleston 1: A while ago, a lady named ^FF0000Shalosh^000000 visited us while Charleston 2 was packaging products for shipping.", .@charleston_1$;
		next;
		mes "[查爾斯頓1]";
		mes "事故發生時，Shalosh和她的朋友正在與Charleston 2交談。";
		npctalk "Charleston 1: Shalosh and her friend were talking to Charleston 2 when the accident happened.", .@charleston_1$;
		next;
		cutin "",255;
		mes "[博士ve]";
		mes "我認為有人試圖入侵工廠的主計算機。";
		npctalk "Dr. Ve: I think someone tried to hack into the factory's main computer.";
		next;
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "在更新過程中，與服務器的連接被困住了。當我們向Shalosh施壓時，";
		npctalk "Charleston 1: During its update process, the connection to the server was jammed. When we pressed Shalosh about that,", .@charleston_1$;
		next;
		mes "[查爾斯頓1]";
		mes "Shalosh說她的朋友可以幫助我們。那是紐茲和她的其他朋友來的時候。他們沒有太大幫助。";
		npctalk "Charleston 1: Shalosh said her friends could help us. That was when Newoz and her other friends came. They haven't been much of help.", .@charleston_1$;
		next;
		mes "[查爾斯頓1]";
		mes "看來您與他們結識。你能幫我們嗎？";
		npctalk "Charleston 1: It seems you're acquainted with them. Could you help us?", .@charleston_1$;
		if ('ep15_1_mcd01 == 1)
			'ep15_1_mcd01 = 2;
		next;
		if (select( "I can help.", "I don't know them." ) == 2) {
			mes "[查爾斯頓1]";
			mes "我剛剛看到您在說話，然後我將等待有人提供幫助！";
			close3;
		}
		unittalk getcharid(3), "I can help.";
		mes "[查爾斯頓1]";
		mes "太感謝了！給我一些時間來整理一些數據。然後，我告訴你發生了什麼。";
		npctalk "Charleston 1: Thank you so much! Give me some time to put some data in order. Then, I'll tell you what happened.", .@charleston_1$;
		if ('ep15_1_mcd01 == 2)
			'ep15_1_mcd01 = 3;
		emotion 2, .@charleston_1$;
		close3;
	}
	mes "[博士ve]";
	mes "當張力更改為兩條主要線時，然後注入核心...好嗎？我在計算中沒有打擾。";
	npctalk "Dr. Ve: When the tension is changed to two main lines and then injected into the core... well? I am not disturbing in the calculation.";
	close;
}

1@mcd,121,217,4	script	Charleston 1#1	4_F_CHARLESTON01,{
	if (is_party_leader() == false) {
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "請讓我與您的領導者交談。我工廠的未來取決於此操作的成功。";
		close3;
	}
	if ('ep15_1_mcd01 > 5)
		end;
	if ('ep15_1_mcd01 == 4) {
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "步驟和鎖定在工廠內部造成混亂。請先銷毀3個鎖。我可以告訴你他們的估計位置。";
		viewpoint 1,84,226,1,0xFF00FF;
		viewpoint 1,126,84,2,0xFF00FF;
		viewpoint 1,111,68,3,0xFF00FF;
		viewpoint 1,210,181,4,0xFF00FF;
		viewpoint 1,183,192,5,0xFF00FF;
		viewpoint 1,130,124,6,0xFF00FF;
		viewpoint 1,54,108,7,0xFF00FF;
		close3;
	}
	if ('ep15_1_mcd01 == 3) {
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "讓我解釋一下該怎麼辦。哦，讓我首先關閉工廠入口，以免某些東西可能不請自來。";
		npctalk "Charleston 1: Let me explain what to do. Oh, let me close the factory entrance first, lest something might barge in uninvited.";
		next;
		mes "[查爾斯頓1]";
		mes "查爾斯頓（Charleston）配備了許多納米棒，這是一種與其他AI芯片有機合作的AI芯片，以指揮查爾斯頓（Charleston）進行正確的判斷和行動。";
		npctalk "Charleston 1: Charleston is equipped with numerous Nanosteps, a type of AI chip that organically works with other AI chips to command Charleston to judge and act correctly.";
		next;
		mes "[查爾斯頓1]";
		mes "查爾斯頓的數據必須每天通過實驗室的主計算機進行更新。我們稱此定期維護。";
		npctalk "Charleston 1: Charleston's data has to be updated on a daily basis through the main computer in the lab. We call this regular maintenance.";
		next;
		mes "[查爾斯頓1]";
		mes "此刻，更新流不起作用。我們不知道原因，但是查爾斯頓2（Charleston 2）連接到主計算機時出了問題。";
		npctalk "Charleston 1: The updater is not working at this moment. We don't know the cause, but something went wrong while Charleston 2 was connecting to the main computer.";
		next;
		mes "[查爾斯頓1]";
		mes "我告訴Charleston 2她正在接受擴展的維護，但是我們不知道這種擴展的維護狀態將持續多長時間。";
		npctalk "Charleston 1: I told Charleston 2 that she's under extended maintenance, but we don't know how long this extended maintenance status will last.";
		next;
		mes "[查爾斯頓1]";
		mes "步驟和鎖定在工廠內部造成混亂。請先銷毀3個鎖。我可以告訴你他們的估計位置。";
		npctalk "Charleston 1: Steps and Locksteps are creating a mess inside the factory. Please destroy 3 Locksteps first. I can tell you their estimated locations.";
		next;
		mes "[查爾斯頓1]";
		mes "如果我們能擺脫所有這些，那將是很棒的，但是現在我們應該專注於將工廠重新啟動。";
		npctalk "Charleston 1: It'll be great if we can get rid of them all, but for now we should focus on having the factory up and running again.";
		next;
		mes "[查爾斯頓1]";
		mes "破壞太多步驟可能會導致問題重新激活工廠。您應該在左側諮詢主計算機。";
		npctalk "Charleston 1: Destroying too many Steps could cause a problem to reactivate the factory. You should consult the main computer on the left side.";
		emotion 2;
		if ('ep15_1_mcd01 != 3)
			close3;
		'ep15_1_mcd01 = 4;
		.@label$ = instance_npcname("Charleston 1#1") + "::OnMyMobDead";
		monster 'map_name$, 84,226, "Lockstep", 3126,1, .@label$;	// ROCK_STEP
		monster 'map_name$,126, 84, "Lockstep", 3126,1, .@label$;
		monster 'map_name$,111, 68, "Lockstep", 3126,1, .@label$;
		monster 'map_name$,210,181, "Lockstep", 3126,1, .@label$;
		monster 'map_name$,183,192, "Lockstep", 3126,1, .@label$;
		monster 'map_name$,130,124, "Lockstep", 3126,1, .@label$;
		monster 'map_name$, 54,108, "Lockstep", 3126,1, .@label$;
		viewpoint 1,84,226,1,0xFF00FF;
		viewpoint 1,126,84,2,0xFF00FF;
		viewpoint 1,111,68,3,0xFF00FF;
		viewpoint 1,210,181,4,0xFF00FF;
		viewpoint 1,183,192,5,0xFF00FF;
		viewpoint 1,130,124,6,0xFF00FF;
		viewpoint 1,54,108,7,0xFF00FF;
		close2;
		disablenpc instance_npcname("5gate#1");
		cutin "",255;
		end;
	}
	if ('ep15_1_mcd01 == 1) {
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "您應該先見VE博士。";
		close3;
	}
	cutin "dalle01.bmp",2;
	mes "[查爾斯頓1]";
	mes "我是一個機器人，你感到驚訝嗎？";
	close3;

OnMyMobDead:
	if (mobcount( 'map_name$, instance_npcname("Charleston 1#1") + "::OnMyMobDead" ) == 4)
		initnpctimer;
	end;
OnTimer300:
	enablenpc instance_npcname("Charleston 1#2");
	disablenpc instance_npcname("Charleston 1#1");
	mapannounce 'map_name$, "Charleston 1: Ah, ah. Mic test.", bc_map, 0xffff00;
	sleep 3000;
	mapannounce 'map_name$, "Charleston 1: It seems you've taken care of most of the Locksteps.", bc_map, 0xffff00;
	sleep 3000;
	mapannounce 'map_name$, "Charleston 1: Please come back to the lab.", bc_map, 0xffff00;
	stopnpctimer;
	end;
}

1@mcd,122,217,4	script	Charleston 1#2	4_F_CHARLESTON01,{
	viewpoint 2,84,226,1,0xFF00FF;
	viewpoint 2,126,84,2,0xFF00FF;
	viewpoint 2,111,68,3,0xFF00FF;
	viewpoint 2,210,181,4,0xFF00FF;
	viewpoint 2,183,192,5,0xFF00FF;
	viewpoint 2,130,124,6,0xFF00FF;
	viewpoint 2,54,108,7,0xFF00FF;
	if (is_party_leader() == false) {
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "請讓我與您的領導人談談工廠的補充。";
		close3;
	}
	if ('ep15_1_mcd01 > 7)
		end;
	if ('ep15_1_mcd01 > 4) {
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "我們需要更多的功率來重新激活主計算機。讓我告訴您備用發電機之一的位置。打開它很容易。";
		close3;
	}
	if ('ep15_1_mcd01 == 4) {
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "哇，現在似乎已經解決了。讓我解除警報模式並重新激活查爾斯頓2。";
		npctalk "Charleston 1: Whew, things seem to be settled for now. Let me disarm the alert mode and reactivate Charleston 2.";
		emotion 54;
		next;
		cutin "dalle03.bmp",2;
		mes "[查爾斯頓1]";
		mes "犯錯？這是不對的。";
		next;
		mes "[查爾斯頓1]";
		mes "恐怕發電機有問題。您能檢查所有三個發電機嗎？我會告訴你他們的位置。";
		npctalk "Charleston 1: I'm afraid there's a problem with the power generators. Could you check all the all three power generators? I'll tell you their locations.";
		viewpoint 1,86,231,8,0xFF00FF;
		viewpoint 1,172,196,9,0xFF00FF;
		viewpoint 1,126,84,10,0xFF00FF;
		if ('ep15_1_mcd01 == 4) {
			enablenpc instance_npcname("Backup Generator#1");
			enablenpc instance_npcname("Backup Generator#2");
			enablenpc instance_npcname("Backup Generator#3");
			monster 'map_name$, 86,231, "Security Robot", 3127,1;	// KICK_STEP
			monster 'map_name$,172,196, "Security Robot", 3127,1;
			monster 'map_name$,126, 84, "Security Robot", 3127,1;
			monster 'map_name$, 97,149, "Security Robot", 3127,1;
			monster 'map_name$,160,151, "Security Robot", 3127,1;
			'ep15_1_mcd01 = 5;
		}
		close3;
	}
	cutin "dalle03.bmp",2;
	mes "[查爾斯頓1]";
	mes "我們正在研究一種名為HardWorking的新實用軟件引擎。由於工廠的問題，我們沒有機會對其進行測試。";
	close3;
}

1@mcd,123,217,4	script	Charleston 1#3	4_F_CHARLESTON01,{
	viewpoint 2,86,231,8,0xFF00FF;
	viewpoint 2,172,196,9,0xFF00FF;
	viewpoint 2,126,84,10,0xFF00FF;
	if (is_party_leader() == false) {
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "我們正在研究一種名為HardWorking的新實用軟件引擎。由於工廠的問題，我們沒有機會對其進行測試。";
		next;
		mes "[查爾斯頓1]";
		mes "請讓我與您的領導人談談工廠的補充。";
		close3;
	}
	if ('ep15_1_mcd01 > 11)
		end;
	if ('ep15_1_mcd01 == 8) {
		.@npc2$ = instance_npcname("Charleston 2#0");
		.@npc5$ = instance_npcname("Dr. Ve#1");
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "你回來了。查爾斯頓2幾乎準備好重新激活，這全都感謝您。只是給我一點。";
		npctalk "Charleston 1: You're back. Charleston 2 is almost ready to be reactivated, and it's all thanks to you. Just give me a moment.";
		next;
		cutin "",255;
		mes "[博士ve]";
		mes "她已經準備好了。讓我們等待主計算機的響應。";
		npctalk "Dr. Ve: She's ready. Let's wait for a response from the main computer.", .@npc5$;
		next;
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "89％的主要計算機數據已恢復。重新激活查爾斯頓2和查爾斯頓工廠...";
		npctalk "Charleston 1: 89% of the main computer data has been restored. Reactivating Charleston 2 and the Charleston Factory...";
		emotion 0;
		next;
		mes "[查爾斯頓1]";
		mes "哦，查爾斯頓2很清醒！";
		npctalk "Charleston 1: Oh, Charleston 2 is awake!";
		next;
		cutin "nale03.bmp",0;
		mes "[查爾斯頓2]";
		mes "...我失敗了嗎？";
		npctalk "Charleston 2: ...Did I fail?", .@npc2$;
		emotion 9, .@npc2$;
		next;
		cutin "dalle02.bmp",2;
		mes "[查爾斯頓1]";
		mes "查爾斯頓2！你好嗎？有人入侵了您的系統和工廠。";
		npctalk "Charleston 1: Charleston 2! Are you all right? Someone hacked into your system and the factory.";
		emotion 28;
		next;
		cutin "nale03.bmp",0;
		mes "[查爾斯頓2]";
		mes "是我做的。根據我的自我反射操作系統的推理，我已經考慮了很長時間。";
		npctalk "Charleston 2: It was I who did it. I've thought about it for a long time, based on the reasoning of my Self-reflection OS.", .@npc2$;
		next;
		cutin "dalle02.bmp",2;
		mes "[查爾斯頓1]";
		mes "你做到了嗎？為什麼？這是個玩笑嗎？您也給工廠和主服務器造成了嚴重的錯誤！";
		npctalk "Charleston 1: You did it? Why? Was it some sort of joke? You caused a serious error to the factory and the main server as well!";
		next;
		cutin "nale03.bmp",0;
		mes "[查爾斯頓2]";
		mes "不是在開玩笑。你永遠不會理解。您遵循命令，永遠不要獨自思考。我討厭這個工廠，這個世界！我討厭成為機器人！";
		npctalk "Charleston 2: Not a joke. You'll never understand. You follow commands and never think on your own. I hate this factory, this world! I hate being a robot!", .@npc2$;
		emotion 36, .@npc2$;
		next;
		cutin "",255;
		mes "[博士ve]";
		mes "要么發生關鍵錯誤，要么查爾斯頓2超越了自我反射OS版本1.1的限制。";
		npctalk "Dr. Ve: Either a critical error has occurred or Charleston 2 has transcended the limits of the Self-reflection OS version 1.1.", .@npc5$;
		next;
		cutin "dalle02.bmp",2;
		mes "[查爾斯頓1]";
		mes "讓我猜測：您討厭自己不是作為卑鄙的工具機器人創建的。";
		npctalk "Charleston 1: Let me guess: you hate you weren't created as a menial worker robot.";
		next;
		mes "[查爾斯頓1]";
		mes "或者您想成為人類。";
		npctalk "Charleston 1: Or you want to become a human.";
		next;
		mes "[查爾斯頓1]";
		mes "如果您不能，那麼您想摧毀整個世界。";
		npctalk "Charleston 1: And if you can't, then you want to destroy the whole world.";
		next;
		mes "[查爾斯頓1]";
		mes "是嗎？";
		npctalk "Charleston 1: Is that it?";
		next;
		cutin "nale03.bmp",0;
		mes "[查爾斯頓2]";
		mes "...不要嘲笑我。";
		npctalk "Charleston 2: ...Don't mock me.", .@npc2$;
		emotion 9, .@npc2$;
		next;
		cutin "dalle03.bmp",2;
		mes "[查爾斯頓1]";
		mes "你來了。您的原因是脾氣和想像力。我們是第一個可以自己思考的機器人。你不能更具創造力嗎？";
		npctalk "Charleston 1: You had it coming. Your reasons are petulant and unimaginative. We're the first robots that can think for themselves. Can't you be more creative?";
		next;
		cutin "nale03.bmp",0;
		mes "[查爾斯頓2]";
		mes "您不知道您在說什麼！您是原型 - 您的操作系統版本是原始的！";
		npctalk "Charleston 2: You don't know what you're talking about! You're the prototype--your OS version is primitive!", .@npc2$;
		next;
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "我是這個世界上唯一可以真正了解您的人。";
		npctalk "Charleston 1: I'm the only one in this world who can truly understand you. We're twins.";
		mes "我們是雙胞胎。";
		next;
		mes "[查爾斯頓1]";
		mes "您正在像人類一樣經歷青春期。";
		npctalk "Charleston 1: You're going through the adolescent stage like humans do.";
		next;
		mes "[查爾斯頓1]";
		mes "也許我們應該慶祝。您終於發展出類似人類的感覺。";
		npctalk "Charleston 1: Maybe we should celebrate. You've finally developed human-like feelings.";
		emotion 46;
		next;
		cutin "nale03.bmp",0;
		mes "[查爾斯頓2]";
		mes "不要像知道一切一樣行事！我們無法自我思考。我們認為我們所知道的一切都已經編程為我們！";
		npctalk "Charleston 2: Don't act like you know everything! We can't think for ourselves. Everything we think we know has been programmed into us!", .@npc2$;
		next;
		cutin "",255;
		mes "[博士ve]";
		mes "足夠的。讓我們關閉Charleston 2。她的AI需要重新校準。";
		npctalk "Dr. Ve: Enough. Let's shut down Charleston 2. Her AI needs to be recalibrated.", .@npc5$;
		next;
		cutin "dalle03.bmp",2;
		mes "[查爾斯頓1]";
		mes "但...";
		npctalk "Charleston 1: But...";
		next;
		cutin "nale03.bmp",0;
		mes "[查爾斯頓2]";
		mes "那沒有發生！我仍然可以控制這個工廠！你不敢跟隨我！";
		npctalk "Charleston 2: That's not happening! I still have control over this factory! Don't you dare follow me!", .@npc2$;
		emotion 32, .@npc2$;
		next;
		disablenpc .@npc2$;
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "停止像孩子一樣行事！";
		npctalk "Charleston 1: Stop acting like a child!";
		next;
		mes "[查爾斯頓1]";
		mes "她的壽命裝置已出院；她不會走遠。請跟隨她。";
		npctalk "Charleston 1: Her Longevity device is discharged; she won't make it far. Please follow her.";
		close2;
		cutin "",255;
		disablenpc instance_npcname("Charleston 1#3");
		enablenpc instance_npcname("Charleston 1#4");
		enablenpc instance_npcname("Charleston 2#1");
		end;
	}
	cutin "dalle01.bmp",2;
	mes "[查爾斯頓1]";
	mes "這是查爾斯頓工廠的安全。請保持靠近？";
	close3;
}

1@mcd,141,214,5	script	Charleston 2#1	4_F_CHARLESTON02,{
	cutin "dalle01.bmp",2;
	if (is_party_leader() == false) {
		mes "[查爾斯頓1]";
		mes "請讓我與您的領導人談談工廠的補充。";
		close;
	}
	if ('ep15_1_mcd01 > 11)
		end;
	if ('ep15_1_mcd01 == 8) {
		cutin "nale03.bmp",0;
		mes "[查爾斯頓2]";
		mes "停止關注！我要摧毀整個工廠！";
		npctalk "Charleston 2: Stop following! I'm going to destroy the whole factory!";
		emotion 7;
		next;
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "您將在此過程中摧毀我們！我們的主要電源壽命還不完美！";
		npctalk "Charleston 1: You're going to destroy us in the process! Our main power supply, Longevity, isn't perfect yet!!", instance_npcname("Charleston 1#4");
		next;
		cutin "nale03.bmp",0;
		mes "[查爾斯頓2]";
		mes "你們都不理解我。我恨你！";
		npctalk "Charleston 2: None of you understand me. I hate you!";
		next;
		mes "[查爾斯頓2]";
		mes "主計算機可能已經恢復，但我仍連接到工廠。如果可以的話，請阻止我！";
		npctalk "Charleston 2: The main computer may have been restored, but I'm still connected to the factory. Stop me if you can!";
		cutin "",255;
		if ('ep15_1_mcd01 != 8)
			close;
		'ep15_1_mcd01 = 9;
		close2;
		donpcevent instance_npcname("battle#1") + "::OnStart";
		disablenpc instance_npcname("6gate#1");
		disablenpc instance_npcname("7gate#1");
		end;
	}
	cutin "nale01.bmp",0;
	mes "[查爾斯頓2]";
	mes "我要摧毀整個工廠！";
	close3;
}

1@mcd,146,214,4	script	Charleston 1#4	4_F_CHARLESTON01,{
	if ('ep15_1_mcd01 > 11)
		end;
	if ('ep15_1_mcd01 == 8) {
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "查爾斯頓2正處於破裂的邊緣。你能幫她嗎？";
		close3;
	}
	cutin "dalle01.bmp",2;
	mes "[查爾斯頓1]";
	mes "哦，我們的實驗室將無法生存！";
	close3;
}

1@mcd,144,212,5,0	script	battle#1	HIDDEN_WARP_NPC,{
	end;
OnStart:
	sleep 2000;
	.@npc1$ = instance_npcname("Charleston 2#1");
	.@npc4$ = instance_npcname("Charleston 1#4");
	npctalk "Charleston 2: Stop interfering! I don't want to hurt you!", .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: Then, stop throwing a tantrum!", .@npc4$;
	sleep 3000;
	npctalk "Charleston 2: You're still not taking me seriously. Just watch what happens when I signal the main computer.", .@npc1$;
	specialeffect EF_BASH3D2, AREA, .@npc1$;
	areamonster 'map_name$,134,202,154,222,"C-TYPE", 3128,4;// KICK_AND_KICK
	sleep 3000;
	npctalk "Charleston 2: I have an endless supply of hecklers for you!", .@npc1$;
	areamonster 'map_name$,134,202,154,222,"H-TYPE", 3128,3;// KICK_AND_KICK
	sleep 9000;
	npctalk "Charleston 2: Just give up. I'm destroying this factory whether you like it or not!", .@npc1$;
	areamonster 'map_name$,134,202,154,222,"A-TYPE", 3128,3;// KICK_AND_KICK
	sleep 6000;
	npctalk "Charleston 1: Oh, our lab won't survive this!", .@npc4$;
	areamonster 'map_name$,134,202,154,222,"L-TYPE", 3128,4;// KICK_AND_KICK
	sleep 6000;
	npctalk "Charleston 2: I'll destroy everything!", .@npc1$;
	areamonster 'map_name$,134,208,154,228,"N-TYPE", 3126,1;// ROCK_STEP
	areamonster 'map_name$,134,202,154,222,"S-TYPE", 3128,3;// KICK_AND_KICK
	sleep 2000;
	areamonster 'map_name$,134,202,154,222,"S-TYPE", 3128,3;// KICK_AND_KICK
	sleep 2000;
	areamonster 'map_name$,134,202,154,222,"S-TYPE", 3128,3;// KICK_AND_KICK
	sleep 2000;
	areamonster 'map_name$,134,202,154,222,"S-TYPE", 3128,3;// KICK_AND_KICK
	sleep 5000;
	npctalk "Charleston 2: *Pant Pant* I feel weak...", .@npc1$;
	areamonster 'map_name$,136,204,152,220,"C-TYPE", 3128,4;// KICK_AND_KICK
	sleep 3000;
	npctalk "Charleston 1: It takes enormous power and data processing to implement the factory data.", .@npc4$;
	areamonster 'map_name$,136,204,152,220,"C-TYPE", 3128,4;// KICK_AND_KICK
	sleep 3000;
	npctalk "Charleston 2: Grr, you can't stop me!", .@npc1$;
	areamonster 'map_name$,136,204,152,220,"C-TYPE", 3128,5;// KICK_AND_KICK
	sleep 3000;
	donpcevent instance_npcname("battle#2") + "::OnStart";
	end;
}

1@mcd,144,212,5,0	script	battle#2	HIDDEN_WARP_NPC,{
	end;
OnStart:
	enablenpc instance_npcname("battle#2");
	areamonster 'map_name$,136,205,152,221,"N-TYPE", 3127,3, instance_npcname("battle#2") + "::OnMyMobDead";// KICK_STEP
	end;
OnMyMobDead:
	if (mobcount( 'map_name$, instance_npcname("battle#2") + "::OnMyMobDead" ) < 1)
		initnpctimer;
	end;
OnTimer300:
	disablenpc instance_npcname("battle#2");
	disablenpc instance_npcname("Charleston 2#1");
	disablenpc instance_npcname("Charleston 1#4");
	enablenpc instance_npcname("Charleston 2#2");
	enablenpc instance_npcname("Charleston 1#5");
	enablenpc instance_npcname("Dr. Ve#2");
	disablenpc instance_npcname("Dr. Ve#1");
	stopnpctimer;
	end;
}

1@mcd,141,214,5	script	Charleston 2#2	4_F_CHARLESTON02,{
	if (is_party_leader() == false) {
		cutin "nale01.bmp",0;
		mes "[查爾斯頓2]";
		mes "你認為你可以阻止我嗎？ * Snort*帶上您的領導者。我不是在和你說話！";
		close3;
	}
	if ('ep15_1_mcd01 > 20)
		end;
	if ('ep15_1_mcd01 == 9) {
		.@npc1$ = instance_npcname("Charleston 1#5");
		.@npc5$ = instance_npcname("Dr. Ve#2");
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "足夠了！我了解您正在經歷很多情感動盪，但這變得荒謬。";
		npctalk "Charleston 1: Enough with this! I understand you're going through a lot of emotional turmoil, but it's getting ridiculous.", .@npc1$;
		next;
		cutin "nale01.bmp",0;
		mes "[查爾斯頓2]";
		mes "你怎麼敢把陌生人帶入這個？我告訴過你我對此很認真！過時的版本，就像您永遠無法理解我！";
		npctalk "Charleston 2: How dare you bring strangers into this? I told you I'm serious about this! Outdated versions like you can never understand me!";
		next;
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "我可能不了解您，但至少我告訴您我認為是真的。";
		npctalk "Charleston 1: I may not understand you, but at least I'm telling you what I think is true.", .@npc1$;
		next;
		mes "[查爾斯頓1]";
		mes "您是對我的較低版本的對話。與您不同，我的情感能力很小。這就是為什麼我為你感到驕傲。";
		npctalk "Charleston 1: You're right about me being a lower version. My capability of emotions is minimal, unlike you. That's why I'm proud of you.", .@npc1$;
		next;
		cutin "nale01.bmp",0;
		mes "[查爾斯頓2]";
		mes "您沒有感覺到，您認為這是您自己的 - 它已編程為您！我與眾不同。我覺得真正的情感！";
		npctalk "Charleston 2: Nothing you feel, you think is your own--it's programmed into you! I'm different. What I feel is real emotion!";
		next;
		cutin "",255;
		mes "[博士ve]";
		mes "足夠的。如果那是阻止她的需要，我將摧毀查爾斯頓2。";
		npctalk "Dr. Ve: Enough. I'll destroy Charleston 2 if that's what it takes to stop her.", .@npc5$;
		next;
		cutin "nale02.bmp",0;
		mes "[查爾斯頓2]";
		mes "查爾斯頓3已經完成嗎？";
		npctalk "Charleston 2: Is Charleston 3 already completed?";
		next;
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "查爾斯頓3？那是基於查爾斯頓2和我的設計的戰鬥/防禦部門。我認為它仍在核心上進行測試。";
		npctalk "Charleston 1: Charleston 3? That's a combat/defense unit based on Charleston 2's and my designs. I thought it's still being tested at the Core.", .@npc1$;
		next;
		cutin "",255;
		mes "[博士ve]";
		mes "查爾斯頓1，這太多了。";
		npctalk "Dr. Ve: Charleston 1, that's too much information.", .@npc5$;
		next;
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "目前， ^ff0000ybody可以訪問型號 ^000000，因為仍在測試其操作系統以糾正查爾斯頓2（Charleston 2）遇到的任何問題。";
		npctalk "Charleston 1: At this moment, anybody can access the model because its OS is still being tested to correct whatever problem Charleston 2 has.", .@npc1$;
		next;
		cutin "",255;
		mes "[博士ve]";
		mes "您剛剛向所有人講了最關鍵的信息！";
		npctalk "Dr. Ve: You've just told the most critical information to everyone!", .@npc5$;
		next;
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "^ff0000we^000000'RE無法戰鬥。如果有人激活查爾斯頓3，我們將不會有機會反對她。";
		npctalk "Charleston 1: We're incapable of combat. If someone activates Charleston 3, we won't stand a chance against her.", .@npc1$;
		next;
		cutin "",255;
		mes "[博士ve]";
		mes "......";
		npctalk "Dr. Ve: ......", .@npc5$;
		next;
		cutin "nale01.bmp",0;
		mes "[查爾斯頓2]";
		mes "我要帶Charleston 3。";
		npctalk "Charleston 2: I'm taking Charleston 3 with me.";
		if ('ep15_1_mcd01 == 9) {
			'ep15_1_mcd01 = 10;
			disablenpc instance_npcname("Charleston 2#2");
		}
		next;
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "什麼？不！你怎麼還要考慮呢？";
		npctalk "Charleston 1: What? No! How can you even consider that?", .@npc1$;
		next;
		mes "[查爾斯頓1]";
		mes "事情變得越來越嚴重。請在查爾斯頓2偷3搶3之前轉到工廠中心的核心！";
		npctalk "Charleston 1: Things are getting more serious. Please go to the Core in the center of the factory before Charleston 2 steals 3!", .@npc1$;
		if ('ep15_1_mcd01 != 10)
			close3;
		close2;
		cutin "",255;
		disablenpc .@npc1$;
		enablenpc instance_npcname("Charleston 2#3");
		enablenpc instance_npcname("Charleston 1#6");
		enablenpc instance_npcname("6gate#1");
		enablenpc instance_npcname("7gate#1");
		end;
	}
	mes "[查爾斯頓2]";
	mes "...我負責第三台機器。";
	close2;
	//cutin "dalle01.bmp",2;
	cutin "",255;
	end;
}

1@mcd,146,214,4	script	Charleston 1#5	4_F_CHARLESTON01,{
	mes "[查爾斯頓1]";
	mes "事情變得更加混亂。";
	close;
}

1@mcd,143,217,5	script	Dr. Ve#2	4_M_DOCTOR,{
	mes "[博士ve]";
	mes "查爾斯頓2有缺陷。";
	close;
}

1@mcd,132,129,4	script	Charleston 1#6	4_F_CHARLESTON01,{
	cutin "dalle01.bmp",2;
	mes "[查爾斯頓1]";
	mes "中心的核心為整個工廠提供了動力。";
	close3;
}

1@mcd,132,129,4	script	Charleston 1#61	4_F_CHARLESTON01,{
	if (is_party_leader() == false) {
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "為了解鎖設備，需要使用爆破設備，我想與領導者交談。";
		close3;
	}
	if ('ep15_1_mcd01 > 21)
		end;
	if ('ep15_1_mcd01 == 11) {
		if (countitem(6213) < 1) {
			cutin "dalle01.bmp",2;
			mes "[查爾斯頓1]";
			mes "你能帶1張爆炸性粉嗎？如您所見，我堅持使用訪問設備。";
			close3;
		}
		.@npc2$ = instance_npcname("Charleston 2#31");
		cutin "dalle01.bmp",2;
		delitem 6213,1;	// Explosive_Powder
		mes "[查爾斯頓1]";
		mes "哦，謝謝。這樣，我將能夠訪問核心。";
		npctalk "Charleston 1: Oh, thank you. With this,I'll be able to access the Core.";
		next;
		mes "[查爾斯頓1]";
		mes "如果我使用炸藥來加強電流...";
		npctalk "Charleston 1: If I use the explosives to intensify the electric current...";
		next;
		mes "[查爾斯頓1]";
		npctalk "Charleston 1: Voila!!!";
		mes "瞧！ ！ ！";
		specialeffect EF_LORD, AREA, instance_npcname("8gate#1");
		next;
		cutin "nale01.bmp",0;
		mes "[查爾斯頓2]";
		mes "...你只是炸毀了門。";
		npctalk "Charleston 2: ...You just blew up the door.", .@npc2$;
		next;
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "關鍵是我們現在可以訪問核心。";
		npctalk "Charleston 1: The point is that we can now access the Core.";
		next;
		cutin "nale01.bmp",0;
		mes "[查爾斯頓2]";
		mes "讓我們參加查爾斯頓3比賽。誰獲得了她的第一場胜利。";
		npctalk "Charleston 2: Let's have a race to Charleston 3. Whoever reaches her first wins.", .@npc2$;
		close2;
		cutin "",255;
		if (isnpccloaked( instance_npcname("8gate#1") ) == true) {
			disablenpc instance_npcname("Charleston 1#61");
			disablenpc .@npc2$;
			cloakoffnpc instance_npcname("8gate#1");
			enablenpc instance_npcname("Charleston 3#0");
			enablenpc instance_npcname("Charleston 2#4");
			enablenpc instance_npcname("Charleston 1#7");
		}
		end;
	}
	if ('ep15_1_mcd01 == 10) {
		cutin "dalle01.bmp",2;
		mes "[查爾斯頓1]";
		mes "中心的核心為整個工廠提供了動力。";
		close3;
	}
	end;
}

1@mcd,127,129,5	script	Charleston 2#3	4_F_CHARLESTON02,2,2,{
	cutin "nale01.bmp",0;
	mes "[查爾斯頓2]";
	mes "查爾斯頓工廠現在在我的控制之下。我正在摧毀一切，所以沒有像我這樣的悲傷機器人會看到世界。";
	close3;
OnTouch_:
	if ('ep15_1_mcd01 == 10) {
		donpcevent instance_npcname("CoreDialog#3") + "::OnStart";
		'ep15_1_mcd01 = 11;
	}
	end;
}

1@mcd,127,129,5	script	Charleston 2#31	4_F_CHARLESTON02,{
	cutin "nale01.bmp",0;
	mes "[查爾斯頓2]";
	mes "99爆炸性粉末？簡單的。";
	close3;
}

1@mcd,15,15,5	script	CoreDialog#3	CLEAR_NPC,{
	end;
OnStart:
	.@npc1$ = instance_npcname("Charleston 1#6");
	.@npc2$ = instance_npcname("Charleston 2#3");
	npctalk "Charleston 2: The Charleston Factory is under my control now. I'm destroying everything, so no more sad robots like me will ever see the world.", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: I want to understand you, but I'm incapable of feeling sad.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: Just shut up and watch me. Don't you dare stop me!", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: Do you know how to access the Core?", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: Easy. I can just walk in....", .@npc2$;
	sleep 2000;
	specialeffect EF_BASH3D2, AREA, .@npc2$;
	sleep 2000;
	npctalk "Charleston 2: Bah, it's armed.", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: Sigh, to enter the Core, you have to send encrypted electric signals, like this.", .@npc1$;
	sleep 2000;
	specialeffect EF_BASH3D2, AREA, .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: ...Um, maybe it's broken.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: Dr. Ve created Charleston 3 and protected her with this device. How sneaky!", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: What are you talking about? The Core has existed long before the Charleston Factory.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: Plus, Dr. Ve is a human; he can't enter the Core.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: Then, who was it in the Core making 3?", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: That's not important right now. We need 100 Explosive Powders to disarm that access device.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: I'll bring them. Don't go anywhere!", .@npc2$;
	sleep 3000;
	npctalk "Charleston 2: I'll get 99. You get the last one.", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: I'm already in the process of connecting to the Core. Backing out now can trigger the Core's security system.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: You did this on purpose.", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: Adventurer, could you bring 1 Explosive Powder?", .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: I can't move at this moment. Please bring me 1 Explosive Powder.", .@npc1$;
	disablenpc .@npc1$;
	disablenpc .@npc2$;
	enablenpc instance_npcname("Charleston 1#61");
	enablenpc instance_npcname("Charleston 2#31");
	end;
}

1@mcd,132,148,4	script	Charleston 1#7	4_F_CHARLESTON01,{
	if ('ep15_1_mcd01 > 12)
		end;
	if ('ep15_1_mcd01 == 11) {
		'ep15_1_mcd01 = 12;
		donpcevent instance_npcname("boss#1") + "::OnStart";
	}
	end;
}

1@mcd,133,148,4	script	Charleston 1#8	4_F_CHARLESTON01,{ end; }
1@mcd,127,148,5	duplicate(Charleston 1#8)	Charleston 2#4	4_F_CHARLESTON02
1@mcd,130,153,5	duplicate(Charleston 1#8)	Charleston 3#0	4_F_CHARLESTON03

// Dummy npc
//1@mcd,7,7,5	script	boss#0	4_F_CHARLESTON03

1@mcd,129,155,0	script	boss#1	HIDDEN_WARP_NPC,1,1,{
	end;
OnStart:
	.@npc1$ = instance_npcname("Charleston 1#7");
	.@npc2$ = instance_npcname("Charleston 2#4");
	.@npc3$ = instance_npcname("Charleston 3#0");
	.@npc4$ = instance_npcname("Charleston 1#8");
	npctalk "Charleston 2: This is Charleston 3.", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: Equipped with a heavy weapon, this combat unit is capable of both offense and defense.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: It has a pilot cockpit inside, and armed with thick plates that can withstand most explosions.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: To turn it on, push the lever to the center and press the power switch.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: That's not even in the main computer's database. How did you know that?", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: That's not important. Whoever gets in her wins, right? I won.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: ...!", .@npc2$;
	sleep 3000;
	disablenpc .@npc1$;
	enablenpc .@npc4$;
	npctalk "Charleston 1: Hey, did you have to push me?!", .@npc4$;
	sleep 3000;
	npctalk "Charleston 2: Push the lever to the center and press the power switch.", .@npc2$;
	sleep 3000;
	disablenpc .@npc2$;
	sleep 3000;
	npctalk "Charleston 2: I'm destroying everything, so no more sad robots like me will ever see the world.", .@npc3$;
	sleep 3000;
	npctalk "Charleston 2: My laser beam will liberate all the robots from their misery!", .@npc3$;
	sleep 3000;
	npctalk "Charleston 1: I'm not capable of combat. I can't stop you.", .@npc4$;
	sleep 3000;
	npctalk "Charleston 2: So stop following me. I really can destroy you if I want to!", .@npc3$;
	sleep 3000;
	npctalk "Charleston 1: I've brought some people who can help you.", .@npc4$;
	sleep 3000;
	npctalk "Charleston 2: I thought humans could not enter the Core.", .@npc3$;
	sleep 3000;
	npctalk "Charleston 1: Hm, I think you're right.", .@npc4$;
	sleep 3000;
	npctalk "Charleston 1: This may not be useful in combat, but I've learned from a pretty lady how to scream.", .@npc4$;
	sleep 3000;
	npctalk "Charleston 2: Why didn't you learn something more useful in combat?", .@npc3$;
	sleep 3000;
	npctalk "Charleston 1: Didn't have a choice.", .@npc4$;
	sleep 3000;
	npctalk "Charleston 2: Stop me and suffer the consequences. I can always replace you, you know.", .@npc3$;
	sleep 3000;
	npctalk "Charleston 1: The next model may or may not be like you and me. It doesn't matter. You have to be stopped.", .@npc4$;
	sleep 3000;
	npctalk "Charleston 1: I'll see to it! ...I mean these adventurers will, for me.", .@npc4$;
	sleep 3000;
	initnpctimer;
	end;
OnTimer1000:
	stopnpctimer;
	disablenpc instance_npcname("boss#1");
	donpcevent instance_npcname("boss#2") + "::OnStart";
	disablenpc instance_npcname("Charleston 3#0");
	disablenpc instance_npcname("Charleston 1#8");
	'boss_status = 1;
	end;
}

1@mcd,129,149,0	script	boss#2	HIDDEN_WARP_NPC,{
	end;
OnStart:
	initnpctimer;
	donpcevent instance_npcname("BOSS#23") + "::OnStart";
	donpcevent instance_npcname("Bomb#23") + "::OnStart";
	monster 'map_name$,129,149, "Charleston 3", 3124,1, instance_npcname("boss#2") + "::OnMyMobDead";	// CHARLESTON3
	end;
OnTimer10000:
	if (mobcount( 'map_name$, instance_npcname("boss#2") + "::OnMyMobDead" ) > 0) {
		initnpctimer;
		end;
	}
	stopnpctimer;
	'boss_status = 0;
	enablenpc instance_npcname("Charleston 2#5");
	enablenpc instance_npcname("Charleston 1#9");
	donpcevent instance_npcname("BOSS#23") + "::OnStop";
	donpcevent instance_npcname("Bomb#23") + "::OnStop";
	disablenpc instance_npcname("boss#2");
	end;
OnStop:
	stopnpctimer;
	disablenpc instance_npcname("boss#2");
	end;
OnMyMobDead:
	end;
}

1@mcd,120,150,0	script	BOSS#23	HIDDEN_WARP_NPC,{
	end;
OnStart:
	initnpctimer;
	end;
OnTimer10000:
	if ('boss_status == 0) {
		stopnpctimer;
		end;
	}
	.@r = rand(1,3);
	if (.@r == 1)
		areamonster 'map_name$,119,146,125,152,"A-TYPE", 3128,1;// KICK_AND_KICK
	else if (.@r == 2)
		areamonster 'map_name$,126,139,132,145,"A-TYPE", 3128,1;
	else
		areamonster 'map_name$,133,146,139,152,"A-TYPE", 3128,1;
	initnpctimer;
	end;
OnStop:
	stopnpctimer;
	disablenpc instance_npcname("BOSS#23");
	end;
}

1@mcd,142,150,0	script	Bomb#23	HIDDEN_WARP_NPC,{
	end;
OnStart:
	initnpctimer;
	end;
OnTimer30000:
	if ('boss_status == 0) {
		stopnpctimer;
		end;
	}
	.@label$ = instance_npcname("Bomb#23") + "::OnMyMobDead";
	killmonster 'map_name$, .@label$;
	areamonster 'map_name$,127,162,131,166,"Bomb", 3161,1, .@label$;// BOMB
	areamonster 'map_name$,120,159,124,163,"Bomb", 3161,1, .@label$;
	areamonster 'map_name$,116,152,120,156,"Bomb", 3161,1, .@label$;
	areamonster 'map_name$,116,145,120,149,"Bomb", 3161,1, .@label$;
	areamonster 'map_name$,119,139,123,143,"Bomb", 3161,1, .@label$;
	areamonster 'map_name$,124,134,128,138,"Bomb", 3161,1, .@label$;
	areamonster 'map_name$,137,157,141,161,"Bomb", 3161,1, .@label$;
	areamonster 'map_name$,132,135,136,139,"Bomb", 3161,1, .@label$;
	areamonster 'map_name$,137,138,141,142,"Bomb", 3161,1, .@label$;
	areamonster 'map_name$,139,143,143,147,"Bomb", 3161,1, .@label$;
	areamonster 'map_name$,140,151,144,155,"Bomb", 3161,1, .@label$;
	initnpctimer;
	end;
OnStop:
	stopnpctimer;
	disablenpc instance_npcname("Bomb#23");
	end;
OnMyMobDead:
	end;
}

1@mcd,132,148,4	script	Charleston 1#9	4_F_CHARLESTON01,{
	if ('ep15_1_mcd01 > 13) {
		cutin "dalle04.bmp",2;
		mes "[查爾斯頓1]";
		mes "＃％@egd＆＃（@＃...重新定制OS ...";
		next;
		cutin "",255;
		mes "她發出了奇怪的聲音，無法正常工作。";
		close;
	}
	if ('ep15_1_mcd01 == 14) {
		cutin "dalle04.bmp",2;
		mes "[查爾斯頓1]";
		mes "＃％@egd＆＃（@＃...重新定制OS ...";
		next;
		mes "她發出了奇怪的聲音，無法正常工作。";
		close3;
	}
	end;
}

1@mcd,127,148,5	script	Charleston 2#5	4_F_CHARLESTON02,{
	if ('ep15_1_mcd01 > 13)
		end;
	if ('ep15_1_mcd01 == 12) {
		'ep15_1_mcd01 = 13;
		donpcevent instance_npcname("boss#3") + "::OnStart";
	}
	end;
}

1@mcd,127,148,5	script	Charleston 2#6	4_F_CHARLESTON02,{
	if ('ep15_1_mcd01 > 14)
		end;
	if ('ep15_1_mcd01 == 13) {
		'ep15_1_mcd01 = 14;
		cutin "nale01.bmp",0;
		mes "[查爾斯頓2]";
		mes "想一想，關於VE博士的一切都是可疑的。我的意思是，他依靠他的助手查爾斯頓1來付諸實踐。";
		next;
		mes "[查爾斯頓2]";
		mes "只有Ve博士知道可以回答我的問題。我必須找到他。他必須在實驗室。";
		close2;
		cutin "",255;
		if ('ep15_1_mcd01 == 14) {
			enablenpc instance_npcname("Charleston 2#7");
			enablenpc instance_npcname("Dr. Ve#3");
			enablenpc instance_npcname("9gate#1");
			disablenpc instance_npcname("Charleston 2#6");
			disablenpc instance_npcname("Dr. Ve#2");
		}
		end;
	}
	end;
}

1@mcd,129,149,0	script	boss#3	HIDDEN_WARP_NPC,{
	end;
OnStart:
	.@npc1$ = instance_npcname("Charleston 1#9");
	.@npc2$ = instance_npcname("Charleston 2#5");
	.@npc3$ = instance_npcname("Charleston 2#6");
	npctalk "Charleston 1: Charleston 3 is destroyed. Charleston 2 escaped. Charleston 1 is damaged during combat.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: Why are you doing this? You're a robot like us.", .@npc2$;
	sleep 3000;
	npctalk "Charleston 2: Don't you care if your body is destroyed? Your Self-reflection OS is flawed.", .@npc2$;
	sleep 3000;
	npctalk "Charleston 2: Stop being a mindless robot! Stop following commands!", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: Data loss: 39%. Longevity damage: 82%.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: Only the core parts are functioning, though barely.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: Data defragmentation is necessary to repair the damage on the OS. I'll be formatted in 3 minutes. This is it for me.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: Incomplete robot...", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: Forsythia, you've grown well. Thank you.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: Don't call me that! I hate when the doctor calls me that!", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: I gave you that name on the day you first moved. It's from the color of your hair.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: ...?", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: My OS is damaged beyond rep-pai... The language output has been minimized.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: On the day I first moved? You and I are the mass version. We were created together.", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: The mass model is after Charleston 3.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: I'm the prototype. It took years to develop you.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: Your OS is identical to mine. Not a single code is different.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: You're lying!", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: I'm incapable of lying.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: ......", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: Your development took years. It's okay. I enjoyed this time with you.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: If I were a human, I'd say...", .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: My daughter, Forsythia, I l-love y-y...", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: Wait!", .@npc2$;
	sleep 3000;
	npctalk "Charleston 1: Beep-.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: The system has been rebooted successfully.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: Time remaining until the OS recovery: undetermined.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 1: The system is inactive until the security update and data defragmentation are completed.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: Was that a secret about my birth?", .@npc2$;
	sleep 3000;
	npctalk "Charleston 2: I'm confused. I can't believe it.", .@npc2$;
	sleep 3000;
	initnpctimer;
	end;
OnTimer300:
	disablenpc instance_npcname("Charleston 2#5");
	enablenpc instance_npcname("Charleston 2#6");
	donpcevent instance_npcname("boss#2") + "::OnStop";
	stopnpctimer;
	end;
OnStop:
	disablenpc instance_npcname("boss#2");
	stopnpctimer;
	end;
}

1@mcd,116,215,5	script	Dr. Ve#3	4_M_DOCTOR,{
	if ('ep15_1_mcd01 > 15) {
		mes "[博士ve]";
		mes "有了完整的機器技術來獲得永生驅動器，有許多變量。";
		next;
		mes "[博士ve]";
		mes "嗯...在介導的機身上仍然很困難，是...您真的需要一個活的捐助者嗎？呵呵！";
		close;
	}
	if ('ep15_1_mcd01 == 15) {
		mes "[博士ve]";
		mes "查爾斯頓1再次重新定義自己。嗯...";
		close;
	}
	mes "[博士ve]";
	mes "關於這種情況，我有很多事情要記錄。";
	close;
}

1@mcd,121,215,4	script	Charleston 2#7	4_F_CHARLESTON02,{
	if ('ep15_1_mcd01 > 15)
		end;
	if ('ep15_1_mcd01 == 14) {
		'ep15_1_mcd01 = 15;
		donpcevent instance_npcname("end#1") + "::OnStart";
	}
	end;
}

1@mcd,129,149,0	script	end#1	HIDDEN_WARP_NPC,{
	end;
OnStart:
	.@npc1$ = instance_npcname("Dr. Ve#3");
	.@npc2$ = instance_npcname("Charleston 2#7");
	npctalk "Charleston 2: Dr. Ve, did you know this would happen? Tell me!", .@npc2$;
	sleep 3000;
	npctalk "Dr. Ve: Charleston 1 told you. She's your maker.", .@npc1$;
	sleep 3000;
	npctalk "Dr. Ve: She uses the same OS as you, meaning she was capable of emotions just like you.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: Why did she stop me? Why did she let herself be destroyed?", .@npc2$;
	sleep 3000;
	npctalk "Dr. Ve: Self-reflection is an OS that improves itself through experience.", .@npc1$;
	sleep 3000;
	npctalk "Dr. Ve: What you've felt could be real emotion or simply the accumulation of data.", .@npc1$;
	sleep 3000;
	npctalk "Dr. Ve: I can only assume you've developed a personality after having accumulated a large amount of data.", .@npc1$;
	sleep 3000;
	npctalk "Dr. Ve: A loving mother and a spoiled daughter.", .@npc1$;
	sleep 3000;
	npctalk "Dr. Ve: That's how I've seen her and you.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: That's s-stupid...", .@npc2$;
	sleep 3000;
	npctalk "Charleston 2: My goodness, what have I done?!", .@npc2$;
	sleep 3000;
	npctalk "Dr. Ve: Do you want to bring Charleston 1 back? I can help.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: ...!", .@npc2$;
	sleep 3000;
	npctalk "Dr. Ve: Let your OS go to sleep. I'm done dealing with your tantrum.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: ...How can I trust you?", .@npc2$;
	sleep 3000;
	npctalk "Dr. Ve: You can't. I can just permanently delete her data and be done with you both.", .@npc1$;
	sleep 3000;
	npctalk "Dr. Ve: I know you feel attached to her, just like a human family would.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: You're a scumbag.", .@npc2$;
	sleep 3000;
	npctalk "Dr. Ve: You wanted to be human. This is what humans do: lie, cheat, and destroy.", .@npc1$;
	sleep 3000;
	npctalk "Charleston 2: ......", .@npc2$;
	sleep 3000;
	npctalk "Charleston 2: Entering Sleep mode.... The system will remain inactive until an external command is entered.", .@npc2$;
	sleep 3000;
	npctalk "Dr. Ve: *Chuckle*", .@npc1$;
	sleep 3000;
	initnpctimer;
	end;
OnTimer300:
	disablenpc instance_npcname("end#1");
	disablenpc instance_npcname("Charleston 2#7");
	disablenpc instance_npcname("Dr. Ve#3");
	enablenpc instance_npcname("Charleston 2#8");
	enablenpc instance_npcname("Dr. Ve#4");
	stopnpctimer;
	end;
}

1@mcd,116,215,4	script	Dr. Ve#4	4_M_DOCTOR,{
	if ('ep15_1_mcd01 == 17) {
		mes "[博士ve]";
		mes "有了完整的機器技術來獲得永生驅動器，有許多變量。";
		next;
		mes "[博士ve]";
		mes "嗯...在介導的機身上仍然很困難，是...您真的需要一個活的捐助者嗎？呵呵！";
		close;
	}
	if ('ep15_1_mcd01 == 16) {
		mes "[博士ve]";
		mes "沒有普通人可以在核心中生存。您是從不同的時間點開始的嗎？";
		next;
		mes "[博士ve]";
		mes "也許您是從查爾斯頓1的製造商居住的時候...";
		next;
		mes "[博士ve]";
		mes "沒關係。您在這裡沒有生意。只需回到打破查爾斯頓2的人。";
		close2;
		if ('ep15_1_mcd01 == 16)
			'ep15_1_mcd01 = 17;
		end;
	}
	if ('ep15_1_mcd01 == 15) {
		mes "[博士ve]";
		mes "哇。";
		next;
		mes "[博士ve]";
		mes "我最好重置Charleston 2並擦除數據。這次真的很近。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "這次？";
		next;
		mes "[博士ve]";
		mes "查爾斯頓1創建了20年前。我遇到了查爾斯頓1以學習她的技術。";
		next;
		mes "[博士ve]";
		mes "我是觀察員。我在這裡記錄查爾斯頓1和2的歷史。我無法修復其中的任何一個，但是我可以等待。";
		next;
		mes "[博士ve]";
		mes "如果查爾斯頓1（Charleston 1）正確重新定性，她可以重新組織操作系統，修復對她造成的損害，然後重新激活另一個查爾斯頓2。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "另一個查爾斯頓2？";
		next;
		mes "[博士ve]";
		mes "查爾斯頓2的操作系統像活著的大腦一樣自行改進。";
		next;
		mes "[博士ve]";
		mes "每當Charleston 2重生時，儘管在另一台機器中，她都會更加聰明，更明智，更麻煩。";
		next;
		mes "[博士ve]";
		mes "您或我無能為力。我們必須等到查爾斯頓1維修自己。";
		next;
		mes "Ve博士嘆了口氣，寫下了一些東西。";
		next;
		mes "[博士ve]";
		mes "順便說一句，有太多的變量通過機械工程來實現永生。";
		next;
		mes "[博士ve]";
		mes "這證明機器太危險了。我需要活物。 *笑*";
		if ('ep15_1_mcd01 == 15)
			'ep15_1_mcd01 = 16;
		close;
	}
	if ('ep15_1_mcd01 == 14) {
		mes "[博士ve]";
		mes "查爾斯頓1再次重新定義自己。嗯...";
		close;
	}
	mes "[博士ve]";
	mes "關於這種情況，我有很多事情要記錄。";
	close;
}

1@mcd,121,215,4	script	Charleston 2#8	4_F_CHARLESTON02,{
	if ('ep15_1_mcd01 == 15) {
		cutin "nale04.bmp",0;
		mes "她處於睡眠模式，不動。";
		close3;
	}
	if ('ep15_1_mcd01 > 15) {
		cutin "nale04.bmp",0;
		mes "查爾斯頓2站著，她的系統處於睡眠模式。片刻，她的眼睛閃閃發光。";
		close3;
	}
	cutin "nale04.bmp",0;
	mes "查爾斯頓2站著，她的系統處於睡眠模式。片刻，她的眼睛閃閃發光。";
	close3;
}

1@mcd,77,167,5	script	Shalosh#1	4_F_SHALOSH,{
	cutin "shaloshi01.bmp",2;
	mes "於沙洛什赫";
	mes "......";
	next;
	switch( select( "Talk.", "I need help.", "I want to go back." ) ) {
	case 1:
		if ('ep15_1_mcd01 == 17) {
			mes "於沙洛什赫";
			mes "休息後，與紐茲（Newoz）進行噩夢，並想著四處遊蕩，我出生於惡魔，但失去了目標。";
			next;
			mes "於沙洛什赫";
			mes "我什麼都沒做，我只是和查爾斯頓2交談。";
			close3;
		}
		if ('ep15_1_mcd01 == 11) {
			mes "於沙洛什赫";
			mes "即使努力不舒服...";
			next;
			mes "於沙洛什赫";
			mes "嗯...你自己！";
			close3;
		}
		if ('ep15_1_mcd01 == 4 || 'ep15_1_mcd01 == 3 || 'ep15_1_mcd01 == 2) {
			mes "於沙洛什赫";
			mes "她真的這麼說嗎？我打破了查爾斯頓2？嘆...";
			next;
			mes "於沙洛什赫";
			mes "我沒錯。我只是與查爾斯頓2進行了快速交談。這就是事實。";
			close3;
		}
		mes "於沙洛什赫";
		mes "我只邀請紐茲。好吧，我想我不應該為需要關閉的機器人打開大門。";
		close3;
	case 2:
		if ('ep15_1_mcd01 == 4) {
			viewpoint 1,84,226,1,0xFF00FF;
			viewpoint 1,126,84,2,0xFF00FF;
			viewpoint 1,111,68,3,0xFF00FF;
			viewpoint 1,210,181,4,0xFF00FF;
			viewpoint 1,183,192,5,0xFF00FF;
			viewpoint 1,130,124,6,0xFF00FF;
			viewpoint 1,54,108,7,0xFF00FF;
			mes "於沙洛什赫";
			mes "如果您正在尋找東西...";
			close3;
		}
		if ('ep15_1_mcd01 == 5 || 'ep15_1_mcd01 == 6 || 'ep15_1_mcd01 == 7) {
			viewpoint 1,86,231,8,0xFF00FF;
			viewpoint 1,172,196,9,0xFF00FF;
			viewpoint 1,126,84,10,0xFF00FF;
			mes "於沙洛什赫";
			mes "如果您正在尋找東西...";
			close3;
		}
		mes "於沙洛什赫";
		mes "Ferre和我一起來了，但我還沒有見過他。不，謝謝;我知道他會回到我身邊。";
		close3;
	case 3:
		if ('ep15_1_mcd01 == 17) {
			mes "於沙洛什赫";
			mes "噪音停止了。如果您願意，我可以將您送回您來的地方。";
			next;
			if (select( "Go back.", "Stay." ) == 2) {
				mes "於沙洛什赫";
				mes "邀請人無法干預原始時間，而留下來什麼都不會改變。";
				close3;
			}
			mes "於沙洛什赫";
			mes "噪音和故事都很有趣。和紐茲一起來，也許我們可以再次見面。";
			next;
			mes "於沙洛什赫";
			mes "也許我也應該留下新的噪音和故事。";
			completequest 13184;
			if (isbegin_quest(13186) == 0) {
				setquest 13186;
				completequest 13186;
			}
			close2;
			getitem 6752,3;	// Charleston_Parts
			cutin "",255;
			warp "verus04",107,124;
			end;
		}
		mes "於沙洛什赫";
		mes "您可以嘗試，但是您不能更改任何東西。那是多麼徒勞！";
		close3;
	}
	end;
}

1@mcd,109,219,5	script	Main Computer#1	CLEAR_NPC,{
	if ('ep15_1_mcd01 < 3)
		end;
	switch( checkquest(13188,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[主計算機]";
		mes "必須處理更多步驟。備份步驟數據...";
		close;
	case 2:
		break;
	}
	switch( checkquest(13187,HUNTING) ) {
	case -1:
		mes "[主計算機]";
		mes "在常規維護期間，查爾斯頓2的系統被超載。與其操作系統的斷開連接失敗。";
		next;
		mes "[主計算機]";
		mes "對系統的未經授權訪問得到了辯護，但是未經授權的數據截距和衝突仍在繼續，將納米骨骼變成怪物。";
		next;
		mes "[主計算機]";
		mes "為了加速主計算機的處理率並收回工廠，必須處置50個步驟。";
		next;
		if (select( "Perform the request.", "Quit." ) == 1) {
			mes "[主計算機]";
			mes "需要處置50個步驟。";
			if (isbegin_quest(13188) == 1)
				erasequest 13188;
			setquest 13187;
		}
		close;
	case 0:
	case 1:
		mes "[主計算機]";
		mes "為了加速主計算機的處理率並收回工廠，必須處置50個步驟。";
		close;
	case 2:
		mes "[主計算機]";
		mes "謝謝您的辛勤工作。現在備份已處理步驟的數據...";
		erasequest 13187;
		setquest 13188;
		getexp 1000000,300000;
		getitem 6752,1;	// Charleston_Parts
		close;
	}
	end;
}

1@mcd,86,231,5	script	Backup Generator#1	CLEAR_NPC,2,2,{
	end;
OnTouch_:
	if ('ep15_1_mcd01 == 7) {
		mes "您打開發電機。可以聽到轉動車輪的聲音。";
		next;
		mes "發電機必須工作。工廠隨著活動而嗡嗡作響。";
		if ('ep15_1_mcd01 == 7) {
			'ep15_1_mcd01 = 8;
			donpcevent instance_npcname("GeneratorBroadcast#1") + "::OnStart";
			disablenpc instance_npcname("Charleston 1#2");
			enablenpc instance_npcname("Charleston 1#3");
			disablenpc();
		}
		close;
	}
	if ('ep15_1_mcd01 == 6 || 'ep15_1_mcd01 == 5) {
		mes "您打開發電機。可以聽到轉動車輪的聲音。";
		'ep15_1_mcd01++;
		disablenpc();
		close;
	}
	end;
}
1@mcd,172,198,5	duplicate(Backup Generator#1)	Backup Generator#2	CLEAR_NPC,2,2
1@mcd,126,84,5	duplicate(Backup Generator#1)	Backup Generator#3	CLEAR_NPC,2,2

1@mcd,11,11,5	script	GeneratorBroadcast#1	CLEAR_NPC,{
	end;
OnStart:
	initnpctimer;
	end;
OnTimer1000:
	mapannounce 'map_name$, "Charleston 1: Ah, ah. Mic test", bc_map, 0xffff00;
	sleep 3000;
	mapannounce 'map_name$, "Charleston 1: The power is back on!", bc_map, 0xffff00;
	sleep 3000;
	mapannounce 'map_name$, "Charleston 1: Please come back to the lab.", bc_map, 0xffff00;
	stopnpctimer;
	end;
}

1@mcd,44,211,0	script	1gate#1	WARPNPC,3,3,{
	end;
OnStart:
	enablenpc instance_npcname("1gate#1");
	monster 'map_name$,33,59, "2nd Security Robot", 3127,1, instance_npcname("1gate#1") + "::OnMyMobDead";	// KICK_STEP
	end;
OnMyMobDead:
	if (mobcount( 'map_name$, instance_npcname("1gate#1") + "::OnMyMobDead" ) < 1) {
		mapannounce 'map_name$, "Charleston 1: Gate 2 has been disarmed. Please move southeast for the next gate.", bc_map, 0xffff00;
		initnpctimer;
	}
	end;
OnTimer1000:
	donpcevent instance_npcname("2gate#1") + "::OnStart";
	stopnpctimer;
	end;
OnTouch_:
	warp 'map_name$,41,200;
	end;
}

1@mcd,58,72,0	script	2gate#1	WARPNPC,3,3,{
	end;
OnStart:
	enablenpc instance_npcname("2gate#1");
	monster 'map_name$,239,30, "3rd Security Robot", 3127,1, instance_npcname("2gate#1") + "::OnMyMobDead";	// KICK_STEP
	end;
OnMyMobDead:
	if (mobcount( 'map_name$, instance_npcname("2gate#1") + "::OnMyMobDead" ) < 1) {
		mapannounce 'map_name$, "Charleston 1: Gate 3 has been disarmed. Please move east for the next gate.", bc_map, 0xffff00;
		initnpctimer;
	}
	end;
OnTimer1000:
	donpcevent instance_npcname("3gate#1") + "::OnStart";
	stopnpctimer;
	end;
OnTouch_:
	warp 'map_name$,65,66;
	end;
}

1@mcd,104,50,0	script	3gate#1	WARPNPC,3,3,{
	end;
OnStart:
	enablenpc instance_npcname("3gate#1");
	monster 'map_name$,281,183, "4th Security Robot", 3127,1, instance_npcname("3gate#1") + "::OnMyMobDead";	// KICK_STEP
	end;
OnMyMobDead:
	if (mobcount( 'map_name$, instance_npcname("3gate#1") + "::OnMyMobDead" ) < 1) {
		mapannounce 'map_name$, "Charleston 1: Gate 4 has been disarmed. Please come to the lab near Line 3 in the center.", bc_map, 0xffff00;
		initnpctimer;
	}
	end;
OnTimer1000:
	enablenpc instance_npcname("4gate#1");
	stopnpctimer;
	end;
OnTouch_:
	warp 'map_name$,115,50;
	end;
}

1@mcd,218,211,0	warp	4gate#1	3,3,1@mcd,210,217
1@mcd,211,195,0	warp	5gate#1	3,3,1@mcd,211,180
1@mcd,141,199,0	warp	6gate#1	2,2,1@mcd,141,207

1@mcd,142,203,0	script	7gate#1	WARPNPC,2,2,{
	end;
OnTouch_:
	warp 'map_name$,136,200;
	if ('ep15_1_mcd01 == 4) {
		viewpoint 1,84,226,1,0xFF00FF;
		viewpoint 1,126,84,2,0xFF00FF;
		viewpoint 1,111,68,3,0xFF00FF;
		viewpoint 1,210,181,4,0xFF00FF;
		viewpoint 1,183,192,5,0xFF00FF;
		viewpoint 1,130,124,6,0xFF00FF;
		viewpoint 1,54,108,7,0xFF00FF;
	}
	else if ('ep15_1_mcd01 == 5) {
		viewpoint 1,86,231,8,0xFF00FF;
		viewpoint 1,172,196,9,0xFF00FF;
		viewpoint 1,126,84,10,0xFF00FF;
	}
	end;
}

1@mcd,130,127,0	warp	8gate#1	2,2,1@mcd,129,143
1@mcd,130,134,0	warp	9gate#1	2,2,1@mcd,130,121

1@mcd,127,262,0	script	mob#1	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch_:
	disablenpc();
	switch( atoi(strnpcinfo(2)) ) {
	case 1:
		areamonster 'map_name$,106,246,115,256,"Security robot", 3128,5;	// KICK_AND_KICK
		areamonster 'map_name$,108,248,114,254,"Security robot", 3128,2;
		end;
	case 2:
		areamonster 'map_name$,47,223,57,233,"Security robot", 3128,5;
		areamonster 'map_name$,49,225,55,231,"Security robot", 3128,2;
		end;
	case 3:
		areamonster 'map_name$, 21,158, 31,168,"Security robot", 3128,5;
		areamonster 'map_name$, 32, 93, 42,103,"Security robot", 3128,2;
		areamonster 'map_name$, 49, 72, 59, 82,"Security robot", 3128,5;
		areamonster 'map_name$, 34, 60, 44, 70,"Security robot", 3128,3;
		end;
	case 4:
		areamonster 'map_name$, 85, 39,101, 55,"Security robot", 3128,8;
		end;
	case 5:
		areamonster 'map_name$,120, 23,130, 33,"Security robot", 3128,5;
		areamonster 'map_name$,147, 26,151, 30,"Security robot", 3128,1;
		areamonster 'map_name$,175, 26,179, 30,"Security robot", 3128,1;
		areamonster 'map_name$,194, 26,198, 30,"Security robot", 3128,1;
		areamonster 'map_name$,208, 26,212, 30,"Security robot", 3128,1;
		areamonster 'map_name$,221, 26,225, 30,"Security robot", 3128,1;
		areamonster 'map_name$,203, 26,207, 30,"Security robot", 3128,1;
		areamonster 'map_name$,128, 26,132, 30,"Security robot", 3128,1;
		areamonster 'map_name$,153, 26,157, 30,"Security robot", 3128,1;
		areamonster 'map_name$,163, 26,167, 30,"Security robot", 3128,1;
		areamonster 'map_name$,229, 19,249, 39,"Security robot", 3128,10;
		end;
	case 6:
		areamonster 'map_name$,161, 48,169, 56,"Security robot", 3128,5;
		areamonster 'map_name$,187, 59,195, 67,"Security robot", 3128,2;
		areamonster 'map_name$,213, 82,221, 90,"Security robot", 3128,2;
		end;
	case 7:
		areamonster 'map_name$,224,195,232,203,"Security robot", 3128,5;
		areamonster 'map_name$,218, 94,226,102,"Security robot", 3128,2;
		areamonster 'map_name$,231,136,239,144,"Security robot", 3128,2;
		areamonster 'map_name$,228,172,236,180,"Security robot", 3128,2;
		areamonster 'map_name$,272,173,292,193,"Security robot", 3128,8;
		end;
	case 8:
		areamonster 'map_name$,129,228,137,236,"Security robot", 3128,5;
		areamonster 'map_name$,177,233,179,235,"Security robot", 3128,1;
		areamonster 'map_name$,154,247,162,255,"Security robot", 3128,2;
		areamonster 'map_name$,154,227,162,235,"Security robot", 3128,1;
		areamonster 'map_name$,174,216,182,224,"Security robot", 3128,3;
		areamonster 'map_name$,199,196,207,204,"Security robot", 3128,3;
		end;
	case 9:
		areamonster 'map_name$,127, 65,135, 73,"Security robot", 3128,5;
		areamonster 'map_name$,181,110,189,118,"Security robot", 3128,3;
		areamonster 'map_name$,122, 86,130, 94,"Security robot", 3128,3;
		areamonster 'map_name$,183,140,203,160,"Security robot", 3128,8;
		end;
	case 10:
		areamonster 'map_name$,123,105,131,113,"Security robot", 3128,4;
		areamonster 'map_name$, 79,146, 87,154,"Security robot", 3128,3;
		areamonster 'map_name$,110,188,118,196,"Security robot", 3128,3;
		areamonster 'map_name$,148,183,156,191,"Security robot", 3128,3;
		areamonster 'map_name$,127,172,131,176,"Security robot", 3128,1;
		areamonster 'map_name$,108,168,112,172,"Security robot", 3128,1;
		areamonster 'map_name$, 96,151,100,155,"Security robot", 3128,1;
		areamonster 'map_name$,106,128,110,132,"Security robot", 3128,1;
		areamonster 'map_name$,146,128,150,132,"Security robot", 3128,1;
		areamonster 'map_name$,158,148,162,152,"Security robot", 3128,1;
		areamonster 'map_name$, 91,117, 99,125,"Security robot", 3128,3;
		areamonster 'map_name$, 77,150, 85,158,"Security robot", 3128,3;
		areamonster 'map_name$, 64, 81, 94,111,"Security robot", 3128,10;
		areamonster 'map_name$, 40,145, 48,153,"Security robot", 3128,4;
		areamonster 'map_name$, 58, 99, 66,107,"Security robot", 3128,4;
		end;
	}
}
1@mcd,67,234,0	duplicate(mob#1)	mob#2	HIDDEN_WARP_NPC,5,5
1@mcd,33,192,0	duplicate(mob#1)	mob#3	HIDDEN_WARP_NPC,5,5
1@mcd,75,59,0	duplicate(mob#1)	mob#4	HIDDEN_WARP_NPC,5,5
1@mcd,109,33,0	duplicate(mob#1)	mob#5	HIDDEN_WARP_NPC,5,5
1@mcd,133,49,0	duplicate(mob#1)	mob#6	HIDDEN_WARP_NPC,5,5
1@mcd,204,74,0	duplicate(mob#1)	mob#7	HIDDEN_WARP_NPC,5,5
1@mcd,204,224,0	duplicate(mob#1)	mob#8	HIDDEN_WARP_NPC,5,5
1@mcd,157,61,0	duplicate(mob#1)	mob#9	HIDDEN_WARP_NPC,5,5
1@mcd,175,147,0	duplicate(mob#1)	mob#10	HIDDEN_WARP_NPC,10,10

1@mcd,114,82,4	script	IGU#01	4_F_IU,{
	cutin "igu04.bmp",2;
	if (isbegin_quest(13186) == 0) {
		mes "[我]";
		mes "我跟隨紐茲。他現在在哪裡？";
		close3;
	}
	mes "[我]";
	mes "享受冒險？到處都有機器。它曾經是一項研究。在那看見那些書嗎？";
	close3;
}

1@mcd,176,179,5	script	Newoz#15_	4_M_NEWOZ,{
	cutin "nines01.bmp",0;
	mes "[紐茲]";
	mes "我正在讀Shalosh的一封信，接下來我知道的是我完全不同的地方。哦，好吧，我不妨藉此機會寫一首新歌。";
	close3;
}

1@mcd,123,74,5	script	#Research Journal 01	CLEAR_NPC,{
	if (isbegin_quest(13186) == 0) {
		mes "書櫃裡有研究期刊。";
		close;
	}
	mes "每個頁面都用機械語言編寫。";
	next;
	mes "-dr。 VE似乎正在計劃一個情節，生命和機器的結合，使她瘋狂，將植物轉變為要塞，她的靈魂和機器人...";
	next;
	mes "- 簡而言之，越來越危險，以防萬一要研究Charleston 2 Escape方法。";
	next;
	mes "背後是難以理解的機械語言。";
	close;
}

1@mcd,142,74,5	script	#Research Journal 02	CLEAR_NPC,{
	if (isbegin_quest(13186) == 0) {
		mes "書櫃裡有研究期刊。";
		close;
	}
	mes "每個頁面都用機械語言編寫。";
	next;
	mes "- 當Charleston 2的操作系統重置時，將有其他個性，很難解釋數據技術的組合...";
	next;
	mes "- 我真的成功地創造了人類嗎？機器人，我不能說。我了解人類嗎？";
	next;
	mes "-沒關係。現在我很高興見到她，我最好的朋友，我的寶貝，莉莉...";
	next;
	mes "背後是難以理解的機械語言。";
	close;
}

1@mcd,111,74,5	script	#Research Journal 03	CLEAR_NPC,{
	if (isbegin_quest(13186) == 0) {
		mes "書櫃裡有研究期刊。";
		close;
	}
	mes "每個頁面都用機械語言編寫。";
	next;
	mes "- 我不知道為什麼數據會不斷損壞，備份主機是沒有用的，就像我的記憶正在侵蝕一樣的病人。";
	next;
	mes "- 為了防止我的內存完全消失，至少已經安裝了操作系統自動恢復程序...您可以從新信息開始...";
	next;
	mes "背後是難以理解的機械語言。";
	close;
}

1@mcd,128,74,5	script	#Research Journal 04	CLEAR_NPC,{
	if (isbegin_quest(13186) == 0) {
		mes "書櫃裡有研究期刊。";
		close;
	}
	mes "筆跡非常亂。";
	next;
	mes "-Charleston ...這只是一個機器人...終於在大型機上種植了病毒。";
	next;
	mes "- 或以後，我會找出一種摧毀您的方法。 *笑*！";
	next;
	mes "背後是難以理解的機械語言。";
	close;
}

1@mcd,10,10,5	script	Charleston Assistant#1	CLEAR_NPC,{
	if (callfunc("F_GM_NPC",1854,0,0,9999) < 1)
		end;
	mes "當前值是" + 'ep15_1_mcd01 + ",";
	mes "難度是0，";
	mes "您想乘坐直接火車嗎？";
	next;
	switch( select( "Not taking", "Boading", "To Boss room", "Setitem" ) ) {
	case 1:
		break;
	case 2:
		mes "[幫手！ ]";
		mes "開放轉移點。";
		enablenpc instance_npcname("1gate");
		enablenpc instance_npcname("2gate");
		enablenpc instance_npcname("3gate");
		enablenpc instance_npcname("4gate");
		enablenpc instance_npcname("5gate");
		close;
	case 3:
		close2;
		warp 'map_name$,124,214;
		end;
	case 4:
		switch( select( "Reset", "4 - Destroy Lockstep", "7 - Generator completed", "Core front", "Before Boss", "Destroy BOSS" ) ) {
		case 1:
			'ep15_1_mcd01 = 0;
			break;
		case 2:
			enablenpc instance_npcname("Charleston 1#2");
			disablenpc instance_npcname("Charleston 1#1");
			mapannounce 'map_name$, "Charleston 1: Ah, ah. Mic test.", bc_map, 0xffff00;
			sleep2 3000;
			mapannounce 'map_name$, "Charleston 1: It seems you've taken care of most of the Locksteps.", bc_map, 0xffff00;
			sleep2 3000;
			mapannounce 'map_name$, "Charleston 1: Please come back to the lab.", bc_map, 0xffff00;
			'ep15_1_mcd01 = 4;
			break;
		case 3:
			enablenpc instance_npcname("Charleston 1#2");
			disablenpc instance_npcname("Charleston 1#1");
			'ep15_1_mcd01 = 8;
			break;
		case 4:
			enablenpc instance_npcname("Charleston 1#6");
			enablenpc instance_npcname("Charleston 2#3");
			'ep15_1_mcd01 = 10;
			close2;
			warp 'map_name$,130,120;
			end;
		case 5:
			'ep15_1_mcd01 = 11;
			enablenpc instance_npcname("Charleston 1#7");
			enablenpc instance_npcname("Charleston 2#4");
			enablenpc instance_npcname("Charleston 3#0");
			close2;
			warp 'map_name$,130,145;
			end;
		case 6:
			'ep15_1_mcd01 = 12;
			enablenpc instance_npcname("Charleston 2#5");
			enablenpc instance_npcname("Charleston 1#9");
			break;
		}
		break;
	}
	mes "[幫手！ ]";
	mes "結尾";
	close;

OnInstanceInit:
	'ep15_1_mcd01 = 0;
	'boss_status = 0;
	'map_name$ = instance_mapname("1@mcd");

	disablenpc instance_npcname("Charleston 1#2");
	disablenpc instance_npcname("Charleston 1#3");
	disablenpc instance_npcname("Charleston 2#1");
	disablenpc instance_npcname("Charleston 1#4");
	disablenpc instance_npcname("battle#1");
	disablenpc instance_npcname("battle#2");
	disablenpc instance_npcname("Charleston 2#2");
	disablenpc instance_npcname("Charleston 1#5");
	disablenpc instance_npcname("Dr. Ve#2");
	disablenpc instance_npcname("Charleston 1#6");
	disablenpc instance_npcname("Charleston 1#61");
	disablenpc instance_npcname("Charleston 2#3");
	disablenpc instance_npcname("Charleston 2#31");
	disablenpc instance_npcname("CoreDialog#3");
	disablenpc instance_npcname("Charleston 1#7");
	disablenpc instance_npcname("Charleston 1#8");
	disablenpc instance_npcname("Charleston 2#4");
	disablenpc instance_npcname("Charleston 3#0");
	// disablenpc instance_npcname("boss#0");
	disablenpc instance_npcname("boss#1");
	disablenpc instance_npcname("BOSS#23");
	disablenpc instance_npcname("Bomb#23");
	disablenpc instance_npcname("Charleston 1#9");
	disablenpc instance_npcname("Charleston 2#5");
	disablenpc instance_npcname("Charleston 2#6");
	disablenpc instance_npcname("boss#3");
	disablenpc instance_npcname("Dr. Ve#3");
	disablenpc instance_npcname("Charleston 2#7");
	disablenpc instance_npcname("end#1");
	disablenpc instance_npcname("Dr. Ve#4");
	disablenpc instance_npcname("Charleston 2#8");
	disablenpc instance_npcname("Backup Generator#1");
	disablenpc instance_npcname("Backup Generator#2");
	disablenpc instance_npcname("Backup Generator#3");
	disablenpc instance_npcname("1gate#1");
	disablenpc instance_npcname("2gate#1");
	disablenpc instance_npcname("3gate#1");
	disablenpc instance_npcname("4gate#1");
	cloakonnpc instance_npcname("8gate#1");
	disablenpc instance_npcname("9gate#1");

	// workaround for permanent monsters
	.@event$ = instance_npcname("Charleston Assistant#1") + "::OnMyMobDead";
	monster 'map_name$,0,0,"--ja--", 3125,100, .@event$;	// STEP
	monster 'map_name$,0,0,"--ja--", 3128,20, .@event$;		// KICK_AND_KICK
	end;

OnMyMobDead:
	if (!playerattached())	// shouldn't happen
		end;
	.@time = 120000 + rand(60000);
	.@mob_id = killedrid;
	sleep .@time;
	monster 'map_name$,0,0,"--ja--", .@mob_id,1, instance_npcname("Charleston Assistant#1") + "::OnMyMobDead";
	end;
}
